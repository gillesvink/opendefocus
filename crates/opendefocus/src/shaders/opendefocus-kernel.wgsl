// This file is automatically generated by xtask. Do not modify manually.
// License: https://opendefocus.codeberg.page/license.html
// Automatic spirv generation by Rust-GPU https://github.com/rust-gpu/rust-gpu

struct opendefocus_shared_ConvolveSettings {
    process_region: vec4<i32>,
    full_region: vec4<i32>,
    resolution: vec2<u32>,
    filter_resolution: vec2<u32>,
    center: vec2<f32>,
    flags: u32,
    non_uniform_flags: u32,
    samples: u32,
    pixel_aspect: f32,
    size: f32,
    max_size: f32,
    catseye_amount: f32,
    catseye_gamma: f32,
    catseye_softness: f32,
    astigmatism_amount: f32,
    astigmatism_gamma: f32,
    barndoors_amount: f32,
    barndoors_gamma: f32,
    barndoors_top: f32,
    barndoors_bottom: f32,
    barndoors_left: f32,
    barndoors_right: f32,
    filter_aspect_ratio_normalizer: f32,
    image_elements: u32,
    ring_distance: f32,
    filter_aspect_ratio: f32,
    pixel_aspect_normalizer: f32,
    render_scale: u32,
    axial_aberration_amount: f32,
    axial_aberration_type: i32,
    _padding: u32,
}

struct type_8 {
    member: opendefocus_shared_ConvolveSettings,
}

struct type_12 {
    member: array<f32>,
}

struct opendefocus_shared_ThreadId {
    x: u32,
    y: u32,
}

struct stages_ring_Ring {
    color: vec4<f32>,
    kernel: vec4<f32>,
    count: u32,
    found: i32,
    weight: f32,
    radius: f32,
    alpha: f32,
    alpha_masked: f32,
    coc: f32,
    deep: f32,
}

struct stages_ring_Rings {
    foreground: stages_ring_Ring,
    background: stages_ring_Ring,
}

struct stages_sample_SampleResult {
    background_sample: f32,
    foreground_sample: f32,
    uses_inpaint: bool,
}

struct datamodel_NonUniformValue {
    offset: vec2<f32>,
    opacity: f32,
    scale: f32,
}

var<private> gid_1: vec3<u32>;
@group(0) @binding(0) 
var<uniform> settings: type_8;
@group(0) @binding(3) 
var<storage, read_write> output_image: type_12;
@group(0) @binding(8) 
var<storage> cached_sample_weights: type_12;
@group(0) @binding(7) 
var depth: texture_2d<f32>;
@group(0) @binding(2) 
var nearest_sampler: sampler;
@group(0) @binding(4) 
var input_image: texture_2d<f32>;
@group(0) @binding(1) 
var bilinear_sampler: sampler;
@group(0) @binding(6) 
var inpaint_image: texture_2d<f32>;
var<private> global: vec2<f32> = vec2<f32>(0f, 0f);
@group(0) @binding(5) 
var filter_: texture_2d<f32>;

fn function() {
    var phi_310_: bool;
    var phi_312_: bool;
    var phi_313_: bool;
    var phi_314_: bool;
    var phi_315_: bool;
    var phi_336_: f32;
    var phi_12054_: f32;
    var phi_11706_: vec4<f32>;
    var phi_11358_: vec4<f32>;
    var phi_11010_: f32;
    var phi_10666_: i32;
    var phi_10322_: f32;
    var phi_9978_: f32;
    var phi_9634_: f32;
    var phi_9290_: vec4<f32>;
    var phi_8946_: vec4<f32>;
    var phi_8592_: bool;
    var phi_371_: opendefocus_shared_ThreadId;
    var phi_372_: opendefocus_shared_ThreadId;
    var phi_395_: opendefocus_shared_ThreadId;
    var phi_440_: u32;
    var phi_465_: u32;
    var phi_488_: f32;
    var phi_500_: f32;
    var phi_502_: f32;
    var phi_503_: f32;
    var phi_504_: bool;
    var phi_529_: opendefocus_shared_ThreadId;
    var phi_532_: stages_ring_Rings;
    var phi_530_: opendefocus_shared_ThreadId;
    var phi_555_: opendefocus_shared_ThreadId;
    var phi_585_: vec2<f32>;
    var phi_602_: vec2<f32>;
    var phi_939_: stages_sample_SampleResult;
    var phi_940_: stages_sample_SampleResult;
    var phi_1603_: vec4<f32>;
    var phi_1816_: bool;
    var phi_1828_: bool;
    var phi_1940_: bool;
    var phi_1973_: bool;
    var phi_1985_: bool;
    var phi_1999_: bool;
    var phi_2011_: bool;
    var phi_2059_: bool;
    var phi_2076_: bool;
    var phi_2090_: bool;
    var phi_2107_: bool;
    var phi_2176_: datamodel_NonUniformValue;
    var phi_2178_: datamodel_NonUniformValue;
    var phi_2179_: bool;
    var phi_2184_: datamodel_NonUniformValue;
    var phi_2827_: bool;
    var phi_2842_: bool;
    var phi_2906_: vec4<f32>;
    var phi_2907_: vec4<f32>;
    var phi_2908_: bool;
    var phi_2909_: vec4<f32>;
    var phi_2910_: bool;
    var phi_2911_: bool;
    var phi_2912_: vec4<f32>;
    var phi_2913_: bool;
    var phi_2914_: bool;
    var phi_2915_: vec4<f32>;
    var phi_2916_: bool;
    var phi_2917_: bool;
    var phi_2220_: u32;
    var phi_6636_: f32;
    var phi_6662_: f32;
    var phi_6722_: f32;
    var phi_6781_: f32;
    var phi_6647_: f32;
    var phi_6829_: f32;
    var phi_6873_: f32;
    var phi_6932_: f32;
    var phi_6840_: f32;
    var phi_7022_: f32;
    var phi_7083_: f32;
    var phi_7142_: f32;
    var phi_7186_: f32;
    var phi_7033_: f32;
    var phi_2273_: bool;
    var phi_2288_: bool;
    var phi_2352_: vec4<f32>;
    var phi_2353_: vec4<f32>;
    var phi_2354_: bool;
    var phi_2355_: vec4<f32>;
    var phi_2356_: bool;
    var phi_2357_: bool;
    var phi_2358_: vec4<f32>;
    var phi_2359_: bool;
    var phi_2360_: bool;
    var phi_2361_: vec4<f32>;
    var phi_2362_: bool;
    var phi_2363_: bool;
    var phi_2410_: bool;
    var phi_2425_: bool;
    var phi_2489_: vec4<f32>;
    var phi_2490_: vec4<f32>;
    var phi_2491_: bool;
    var phi_2492_: vec4<f32>;
    var phi_2493_: bool;
    var phi_2494_: bool;
    var phi_2495_: vec4<f32>;
    var phi_2496_: bool;
    var phi_2497_: bool;
    var phi_2498_: vec4<f32>;
    var phi_2499_: bool;
    var phi_2500_: bool;
    var phi_2547_: bool;
    var phi_2562_: bool;
    var phi_2626_: vec4<f32>;
    var phi_2627_: vec4<f32>;
    var phi_2628_: bool;
    var phi_2629_: vec4<f32>;
    var phi_2630_: bool;
    var phi_2631_: bool;
    var phi_2632_: vec4<f32>;
    var phi_2633_: bool;
    var phi_2634_: bool;
    var phi_2635_: vec4<f32>;
    var phi_2636_: bool;
    var phi_2637_: bool;
    var phi_2684_: bool;
    var phi_2699_: bool;
    var phi_2763_: vec4<f32>;
    var phi_2764_: vec4<f32>;
    var phi_2765_: bool;
    var phi_2766_: vec4<f32>;
    var phi_2767_: bool;
    var phi_2768_: bool;
    var phi_2769_: vec4<f32>;
    var phi_2770_: bool;
    var phi_2771_: bool;
    var phi_2772_: vec4<f32>;
    var phi_2773_: bool;
    var phi_2774_: bool;
    var phi_2927_: vec4<f32>;
    var phi_3011_: f32;
    var phi_3072_: stages_ring_Rings;
    var phi_3742_: vec4<f32>;
    var phi_3743_: vec4<f32>;
    var phi_3956_: bool;
    var phi_3968_: bool;
    var phi_4080_: bool;
    var phi_4113_: bool;
    var phi_4125_: bool;
    var phi_4139_: bool;
    var phi_4151_: bool;
    var phi_4199_: bool;
    var phi_4216_: bool;
    var phi_4230_: bool;
    var phi_4247_: bool;
    var phi_4316_: datamodel_NonUniformValue;
    var phi_4318_: datamodel_NonUniformValue;
    var phi_4319_: bool;
    var phi_4324_: datamodel_NonUniformValue;
    var phi_4967_: bool;
    var phi_4982_: bool;
    var phi_5046_: vec4<f32>;
    var phi_5047_: vec4<f32>;
    var phi_5048_: bool;
    var phi_5049_: vec4<f32>;
    var phi_5050_: bool;
    var phi_5051_: bool;
    var phi_5052_: vec4<f32>;
    var phi_5053_: bool;
    var phi_5054_: bool;
    var phi_5055_: vec4<f32>;
    var phi_5056_: bool;
    var phi_5057_: bool;
    var phi_4360_: u32;
    var phi_7690_: f32;
    var phi_7716_: f32;
    var phi_7776_: f32;
    var phi_7835_: f32;
    var phi_7701_: f32;
    var phi_7883_: f32;
    var phi_7927_: f32;
    var phi_7986_: f32;
    var phi_7894_: f32;
    var phi_8076_: f32;
    var phi_8137_: f32;
    var phi_8196_: f32;
    var phi_8240_: f32;
    var phi_8087_: f32;
    var phi_4413_: bool;
    var phi_4428_: bool;
    var phi_4492_: vec4<f32>;
    var phi_4493_: vec4<f32>;
    var phi_4494_: bool;
    var phi_4495_: vec4<f32>;
    var phi_4496_: bool;
    var phi_4497_: bool;
    var phi_4498_: vec4<f32>;
    var phi_4499_: bool;
    var phi_4500_: bool;
    var phi_4501_: vec4<f32>;
    var phi_4502_: bool;
    var phi_4503_: bool;
    var phi_4550_: bool;
    var phi_4565_: bool;
    var phi_4629_: vec4<f32>;
    var phi_4630_: vec4<f32>;
    var phi_4631_: bool;
    var phi_4632_: vec4<f32>;
    var phi_4633_: bool;
    var phi_4634_: bool;
    var phi_4635_: vec4<f32>;
    var phi_4636_: bool;
    var phi_4637_: bool;
    var phi_4638_: vec4<f32>;
    var phi_4639_: bool;
    var phi_4640_: bool;
    var phi_4687_: bool;
    var phi_4702_: bool;
    var phi_4766_: vec4<f32>;
    var phi_4767_: vec4<f32>;
    var phi_4768_: bool;
    var phi_4769_: vec4<f32>;
    var phi_4770_: bool;
    var phi_4771_: bool;
    var phi_4772_: vec4<f32>;
    var phi_4773_: bool;
    var phi_4774_: bool;
    var phi_4775_: vec4<f32>;
    var phi_4776_: bool;
    var phi_4777_: bool;
    var phi_4824_: bool;
    var phi_4839_: bool;
    var phi_4903_: vec4<f32>;
    var phi_4904_: vec4<f32>;
    var phi_4905_: bool;
    var phi_4906_: vec4<f32>;
    var phi_4907_: bool;
    var phi_4908_: bool;
    var phi_4909_: vec4<f32>;
    var phi_4910_: bool;
    var phi_4911_: bool;
    var phi_4912_: vec4<f32>;
    var phi_4913_: bool;
    var phi_4914_: bool;
    var phi_5067_: vec4<f32>;
    var phi_5212_: stages_ring_Rings;
    var phi_5213_: stages_ring_Rings;
    var phi_533_: stages_ring_Rings;
    var phi_8580_: bool;
    var local: stages_ring_Rings;
    var local_1: stages_ring_Rings;
    var local_2: stages_ring_Rings;
    var phi_5224_: stages_ring_Rings;
    var phi_5348_: f32;
    var phi_12430_: f32;
    var phi_12429_: i32;
    var phi_12428_: f32;
    var phi_12417_: f32;
    var phi_12410_: f32;
    var phi_12403_: vec4<f32>;
    var phi_12396_: vec4<f32>;
    var phi_12392_: f32;
    var phi_12390_: vec4<f32>;
    var phi_12388_: vec4<f32>;
    var phi_12381_: bool;
    var phi_12415_: f32;
    var phi_12408_: f32;
    var phi_12401_: vec4<f32>;
    var phi_12394_: vec4<f32>;
    var phi_12391_: f32;
    var phi_12389_: vec4<f32>;
    var phi_12387_: vec4<f32>;
    var phi_12380_: bool;
    var phi_12427_: f32;
    var phi_12422_: vec4<f32>;
    var phi_12425_: f32;
    var phi_12424_: f32;
    var phi_12423_: vec4<f32>;
    var local_3: stages_ring_Rings;

    switch bitcast<i32>(0u) {
        default: {
            let _e79 = gid_1;
            let _e81 = arrayLength((&output_image.member));
            let _e83 = arrayLength((&cached_sample_weights.member));
            let _e86 = vec2<u32>(_e79.x, _e79.y);
            let _e90 = settings.member.full_region[2u];
            if (_e79.x >= bitcast<u32>(_e90)) {
            } else {
                let _e96 = settings.member.full_region[3u];
                if (_e79.y >= bitcast<u32>(_e96)) {
                } else {
                    let _e102 = settings.member.full_region[0u];
                    let _e104 = bitcast<u32>((_e90 - _e102));
                    let _e105 = f32(_e79.x);
                    let _e106 = f32(_e79.y);
                    let _e110 = settings.member.full_region[1u];
                    let _e113 = f32(_e104);
                    let _e114 = f32(bitcast<u32>((_e96 - _e110)));
                    let _e117 = bitcast<u32>(_e102);
                    let _e118 = (_e117 + _e79.x);
                    let _e119 = bitcast<u32>(_e110);
                    let _e120 = (_e119 + _e79.y);
                    let _e121 = bitcast<i32>(_e118);
                    let _e125 = settings.member.process_region[0u];
                    if (_e121 >= _e125) {
                        let _e130 = settings.member.process_region[2u];
                        if (_e121 < _e130) {
                            let _e132 = bitcast<i32>(_e120);
                            let _e136 = settings.member.process_region[1u];
                            let _e138 = (_e132 >= (_e136 - 1i));
                            if _e138 {
                                let _e142 = settings.member.process_region[3u];
                                phi_310_ = (_e132 <= _e142);
                            } else {
                                phi_310_ = bool();
                            }
                            let _e145 = phi_310_;
                            phi_312_ = _e145;
                            phi_313_ = select(true, false, _e138);
                        } else {
                            phi_312_ = bool();
                            phi_313_ = true;
                        }
                        let _e148 = phi_312_;
                        let _e150 = phi_313_;
                        phi_314_ = _e148;
                        phi_315_ = _e150;
                    } else {
                        phi_314_ = bool();
                        phi_315_ = true;
                    }
                    let _e152 = phi_314_;
                    let _e154 = phi_315_;
                    if !(select(_e152, false, _e154)) {
                    } else {
                        let _e159 = settings.member.flags;
                        let _e161 = ((_e159 & 1u) == 1u);
                        if _e161 {
                            let _e167 = settings.member.max_size;
                            phi_336_ = _e167;
                        } else {
                            let _e163 = textureSampleLevel(depth, nearest_sampler, vec2<f32>((_e105 / _e113), (_e106 / _e114)), 0f);
                            phi_336_ = _e163.x;
                        }
                        let _e169 = phi_336_;
                        let _e172 = settings.member.samples;
                        phi_12054_ = 0f;
                        phi_11706_ = vec4<f32>(0f, 0f, 0f, 0f);
                        phi_11358_ = vec4<f32>(0f, 0f, 0f, 0f);
                        phi_11010_ = 1f;
                        phi_10666_ = 0i;
                        phi_10322_ = 0f;
                        phi_9978_ = 0f;
                        phi_9634_ = 0f;
                        phi_9290_ = vec4<f32>(0f, 0f, 0f, 0f);
                        phi_8946_ = vec4<f32>(0f, 0f, 0f, 0f);
                        phi_8592_ = false;
                        phi_371_ = opendefocus_shared_ThreadId(0u, _e172);
                        loop {
                            let _e175 = phi_12054_;
                            let _e177 = phi_11706_;
                            let _e179 = phi_11358_;
                            let _e181 = phi_11010_;
                            let _e183 = phi_10666_;
                            let _e185 = phi_10322_;
                            let _e187 = phi_9978_;
                            let _e189 = phi_9634_;
                            let _e191 = phi_9290_;
                            let _e193 = phi_8946_;
                            let _e195 = phi_8592_;
                            let _e197 = phi_371_;
                            if (_e197.x < _e197.y) {
                                let _e204 = (_e197.y - 1u);
                                phi_372_ = opendefocus_shared_ThreadId(_e197.x, _e204);
                                phi_395_ = opendefocus_shared_ThreadId(1u, _e204);
                            } else {
                                phi_372_ = _e197;
                                phi_395_ = opendefocus_shared_ThreadId(0u, opendefocus_shared_ThreadId().y);
                            }
                            let _e210 = phi_372_;
                            let _e212 = phi_395_;
                            let _e216 = (bitcast<i32>(_e212.x) != 0i);
                            if _e216 {
                                let _e218 = f32(_e172);
                                let _e221 = settings.member.ring_distance;
                                let _e223 = max((f32(_e212.y) * _e221), 0.00001f);
                                let _e224 = (_e212.y == 0u);
                                if _e224 {
                                    phi_440_ = 1u;
                                } else {
                                    let _e229 = ((_e218 * 0.1f) * f32((20u + (_e212.y * 2u))));
                                    phi_440_ = select(select(u32(_e229), 0u, (_e229 < 0f)), 4294967295u, (_e229 > 4294967000f));
                                }
                                let _e236 = phi_440_;
                                if _e224 {
                                    phi_465_ = 1u;
                                } else {
                                    let _e240 = ((_e218 * 0.1f) * f32((_e212.y * 2u)));
                                    phi_465_ = select(select(u32(_e240), 0u, (_e240 < 0f)), 4294967295u, (_e240 > 4294967000f));
                                }
                                let _e247 = phi_465_;
                                let _e249 = (360f / f32(_e236));
                                let _e250 = stages_ring_Ring(vec4<f32>(0f, 0f, 0f, 0f), vec4<f32>(0f, 0f, 0f, 0f), _e236, 0i, 0f, _e223, 0f, 0f, 0f, 0f);
                                let _e252 = (_e247 == 0u);
                                if _e252 {
                                    phi_503_ = f32();
                                    phi_504_ = true;
                                } else {
                                    let _e253 = (_e236 == 0u);
                                    if _e253 {
                                        phi_502_ = f32();
                                    } else {
                                        if _e252 {
                                            phi_488_ = 1f;
                                        } else {
                                            phi_488_ = (1f / max(((_e223 * (360f / f32(_e247))) * 0.017453292f), 0.0001f));
                                        }
                                        let _e261 = phi_488_;
                                        if _e253 {
                                            phi_500_ = 1f;
                                        } else {
                                            phi_500_ = (1f / max(((_e223 * _e249) * 0.017453292f), 0.0001f));
                                        }
                                        let _e267 = phi_500_;
                                        phi_502_ = (_e267 / _e261);
                                    }
                                    let _e270 = phi_502_;
                                    phi_503_ = _e270;
                                    phi_504_ = _e253;
                                }
                                let _e272 = phi_503_;
                                let _e274 = phi_504_;
                                let _e275 = select(_e272, 1f, _e274);
                                phi_529_ = opendefocus_shared_ThreadId(0u, _e236);
                                phi_532_ = stages_ring_Rings(_e250, _e250);
                                loop {
                                    let _e278 = phi_529_;
                                    let _e280 = phi_532_;
                                    local = _e280;
                                    local_1 = _e280;
                                    local_2 = _e280;
                                    local_3 = _e280;
                                    if (_e278.x < _e278.y) {
                                        phi_530_ = opendefocus_shared_ThreadId((_e278.x + 1u), _e278.y);
                                        phi_555_ = opendefocus_shared_ThreadId(1u, _e278.x);
                                    } else {
                                        phi_530_ = _e278;
                                        phi_555_ = opendefocus_shared_ThreadId(0u, opendefocus_shared_ThreadId().y);
                                    }
                                    let _e293 = phi_530_;
                                    let _e295 = phi_555_;
                                    let _e299 = (bitcast<i32>(_e295.x) != 0i);
                                    if _e299 {
                                        let _e302 = ((_e249 * f32(_e295.y)) * 0.017453292f);
                                        let _e304 = (_e223 * cos(_e302));
                                        let _e306 = (_e223 * sin(_e302));
                                        let _e309 = settings.member.pixel_aspect;
                                        let _e310 = (_e309 > 1f);
                                        if _e310 {
                                            let _e315 = settings.member.pixel_aspect_normalizer;
                                            phi_585_ = vec2<f32>((_e304 * _e315), _e306);
                                        } else {
                                            phi_585_ = vec2<f32>(_e304, (_e306 * _e309));
                                        }
                                        let _e319 = phi_585_;
                                        let _e322 = settings.member.filter_aspect_ratio;
                                        if (_e322 < 1f) {
                                            phi_602_ = vec2<f32>((_e319.x * _e322), _e319.y);
                                        } else {
                                            let _e326 = settings.member.filter_aspect_ratio_normalizer;
                                            phi_602_ = vec2<f32>(_e319.x, (_e319.y * _e326));
                                        }
                                        let _e338 = phi_602_;
                                        let _e341 = (_e338.x + _e105);
                                        let _e342 = (_e338.y + _e106);
                                        let _e343 = (_e341 / _e113);
                                        let _e344 = (_e342 / _e114);
                                        if _e161 {
                                            let _e480 = settings.member.max_size;
                                            phi_940_ = stages_sample_SampleResult(-(_e480), 0f, false);
                                        } else {
                                            let _e346 = textureSampleLevel(depth, nearest_sampler, vec2<f32>(_e343, _e344), 0f);
                                            let _e348 = floor(_e341);
                                            let _e349 = floor(_e342);
                                            let _e350 = (_e341 - _e348);
                                            let _e352 = (_e348 / _e113);
                                            let _e353 = (_e349 / _e114);
                                            let _e355 = textureSampleLevel(depth, nearest_sampler, vec2<f32>(_e352, _e353), 0f);
                                            let _e357 = ((_e348 + 1f) / _e113);
                                            let _e358 = vec2<f32>(_e357, _e353);
                                            let _e359 = textureSampleLevel(depth, nearest_sampler, _e358, 0f);
                                            let _e360 = textureSampleLevel(depth, nearest_sampler, _e358, 0f);
                                            let _e363 = abs((_e360.x - _e346.x));
                                            let _e367 = (f32(select(0u, 1u, (_e363 > 0f))) * _e363);
                                            let _e368 = (_e367 < 1f);
                                            let _e377 = (_e350 * (1f - ((f32(select(0u, 1u, _e368)) * _e367) + f32(select(0u, 1u, !(_e368))))));
                                            let _e378 = (1f - _e377);
                                            let _e390 = ((_e349 + 1f) / _e114);
                                            let _e391 = vec2<f32>(_e352, _e390);
                                            let _e392 = textureSampleLevel(depth, nearest_sampler, _e391, 0f);
                                            let _e393 = textureSampleLevel(depth, nearest_sampler, _e391, 0f);
                                            let _e395 = vec2<f32>(_e357, _e390);
                                            let _e396 = textureSampleLevel(depth, nearest_sampler, _e395, 0f);
                                            let _e397 = textureSampleLevel(depth, nearest_sampler, _e395, 0f);
                                            let _e400 = abs((_e393.x - _e397.x));
                                            let _e404 = (f32(select(0u, 1u, (_e400 > 0f))) * _e400);
                                            let _e405 = (_e404 < 1f);
                                            let _e414 = (_e350 * (1f - ((f32(select(0u, 1u, _e405)) * _e404) + f32(select(0u, 1u, !(_e405))))));
                                            let _e415 = (1f - _e414);
                                            let _e429 = (1f - abs((mix(_e393.x, _e397.x, _e414) - _e346.x)));
                                            let _e433 = (f32(select(0u, 1u, (_e429 > 0f))) * _e429);
                                            let _e434 = (_e433 < 1f);
                                            let _e442 = ((_e342 - _e349) * ((f32(select(0u, 1u, _e434)) * _e433) + f32(select(0u, 1u, !(_e434)))));
                                            let _e443 = (1f - _e442);
                                            let _e448 = ((((_e355.x * _e378) + (_e359.x * _e377)) * _e443) + (((_e392.x * _e415) + (_e396.x * _e414)) * _e442));
                                            let _e450 = (_e448 < 0f);
                                            let _e453 = (_e169 > 0f);
                                            let _e463 = settings.member.max_size;
                                            let _e472 = ((f32(select(0u, 1u, _e450)) * ((f32(select(0u, 1u, _e453)) * -(_e169)) + (f32(select(0u, 1u, !(_e453))) * -(_e463)))) + (f32(select(0u, 1u, !(_e450))) * _e448));
                                            if (_e169 >= 0f) {
                                                phi_939_ = stages_sample_SampleResult(((((_e355.y * _e378) + (_e359.y * _e377)) * _e443) + (((_e392.y * _e415) + (_e396.y * _e414)) * _e442)), _e472, true);
                                            } else {
                                                phi_939_ = stages_sample_SampleResult(_e448, _e472, false);
                                            }
                                            let _e477 = phi_939_;
                                            phi_940_ = _e477;
                                        }
                                        let _e484 = phi_940_;
                                        if _e161 {
                                            phi_3072_ = _e280;
                                        } else {
                                            let _e486 = abs(_e484.foreground_sample);
                                            let _e490 = f32(select(0u, 1u, !((_e484.foreground_sample <= 0f))));
                                            if _e161 {
                                                let _e621 = textureSampleLevel(input_image, bilinear_sampler, vec2<f32>(_e343, _e344), 0f);
                                                phi_1603_ = _e621;
                                            } else {
                                                let _e491 = floor(_e341);
                                                let _e492 = floor(_e342);
                                                let _e493 = (_e341 - _e491);
                                                let _e495 = (_e491 / _e113);
                                                let _e496 = (_e492 / _e114);
                                                let _e498 = textureSampleLevel(input_image, nearest_sampler, vec2<f32>(_e495, _e496), 0f);
                                                let _e500 = ((_e491 + 1f) / _e113);
                                                let _e501 = vec2<f32>(_e500, _e496);
                                                let _e502 = textureSampleLevel(input_image, nearest_sampler, _e501, 0f);
                                                let _e503 = textureSampleLevel(depth, nearest_sampler, _e501, 0f);
                                                let _e506 = abs((_e503.x - _e484.foreground_sample));
                                                let _e510 = (f32(select(0u, 1u, (_e506 > 0f))) * _e506);
                                                let _e511 = (_e510 < 1f);
                                                let _e520 = (_e493 * (1f - ((f32(select(0u, 1u, _e511)) * _e510) + f32(select(0u, 1u, !(_e511))))));
                                                let _e521 = (1f - _e520);
                                                let _e543 = ((_e492 + 1f) / _e114);
                                                let _e544 = vec2<f32>(_e495, _e543);
                                                let _e545 = textureSampleLevel(input_image, nearest_sampler, _e544, 0f);
                                                let _e546 = textureSampleLevel(depth, nearest_sampler, _e544, 0f);
                                                let _e548 = vec2<f32>(_e500, _e543);
                                                let _e549 = textureSampleLevel(input_image, nearest_sampler, _e548, 0f);
                                                let _e550 = textureSampleLevel(depth, nearest_sampler, _e548, 0f);
                                                let _e553 = abs((_e546.x - _e550.x));
                                                let _e557 = (f32(select(0u, 1u, (_e553 > 0f))) * _e553);
                                                let _e558 = (_e557 < 1f);
                                                let _e567 = (_e493 * (1f - ((f32(select(0u, 1u, _e558)) * _e557) + f32(select(0u, 1u, !(_e558))))));
                                                let _e568 = (1f - _e567);
                                                let _e592 = (1f - abs((mix(_e546.x, _e550.x, _e567) - _e484.foreground_sample)));
                                                let _e596 = (f32(select(0u, 1u, (_e592 > 0f))) * _e592);
                                                let _e597 = (_e596 < 1f);
                                                let _e605 = ((_e342 - _e492) * ((f32(select(0u, 1u, _e597)) * _e596) + f32(select(0u, 1u, !(_e597)))));
                                                let _e606 = (1f - _e605);
                                                phi_1603_ = vec4<f32>(((((_e498.x * _e521) + (_e502.x * _e520)) * _e606) + (((_e545.x * _e568) + (_e549.x * _e567)) * _e605)), ((((_e498.y * _e521) + (_e502.y * _e520)) * _e606) + (((_e545.y * _e568) + (_e549.y * _e567)) * _e605)), ((((_e498.z * _e521) + (_e502.z * _e520)) * _e606) + (((_e545.z * _e568) + (_e549.z * _e567)) * _e605)), ((((_e498.w * _e521) + (_e502.w * _e520)) * _e606) + (((_e545.w * _e568) + (_e549.w * _e567)) * _e605)));
                                            }
                                            let _e623 = phi_1603_;
                                            let _e639 = (_e338.x * ((f32(select(0u, 1u, _e310)) * _e309) + f32(select(0u, 1u, !(_e310)))));
                                            let _e640 = (_e309 < 1f);
                                            let _e645 = settings.member.pixel_aspect_normalizer;
                                            let _e651 = (_e338.y * ((f32(select(0u, 1u, _e640)) * _e645) + f32(select(0u, 1u, !(_e640)))));
                                            if ((_e159 & 8u) == 8u) {
                                                let _e654 = (_e484.foreground_sample != 0f);
                                                if _e654 {
                                                    let _e655 = f32(_e118);
                                                    let _e656 = f32(_e120);
                                                    let _e664 = (1f - (2f * f32(select(0u, 1u, ((_e159 & 64u) == 64u)))));
                                                    let _e665 = (_e639 / _e484.foreground_sample);
                                                    let _e667 = (_e665 * 2f);
                                                    let _e668 = ((_e651 / _e484.foreground_sample) * 2f);
                                                    let _e672 = settings.member.center[0u];
                                                    let _e676 = settings.member.center[1u];
                                                    let _e681 = ((((_e655 + _e639) - _e672) / _e672) * _e664);
                                                    let _e682 = ((((_e656 + _e651) - _e676) / _e676) * _e664);
                                                    let _e685 = settings.member.non_uniform_flags;
                                                    let _e687 = ((_e685 & 32u) == 32u);
                                                    let _e692 = settings.member.barndoors_amount;
                                                    let _e693 = (_e486 * 0.2f);
                                                    let _e695 = select(_e693, 0f, (_e693 < 0f));
                                                    let _e698 = (_e692 * select(_e695, 1f, (_e695 > 1f)));
                                                    let _e699 = (_e681 < 0f);
                                                    let _e704 = settings.member.barndoors_right;
                                                    let _e712 = settings.member.barndoors_left;
                                                    let _e717 = (_e682 < 0f);
                                                    let _e722 = settings.member.barndoors_top;
                                                    let _e730 = settings.member.barndoors_bottom;
                                                    let _e737 = settings.member.barndoors_gamma;
                                                    let _e738 = (1f / _e737);
                                                    let _e739 = abs(_e681);
                                                    let _e744 = (bitcast<u32>(_e681) & 2147483648u);
                                                    let _e747 = abs(_e682);
                                                    let _e752 = (bitcast<u32>(_e682) & 2147483648u);
                                                    let _e756 = ((_e685 & 64u) == 64u);
                                                    let _e765 = ((_e685 & 128u) == 128u);
                                                    if _e765 {
                                                        phi_1816_ = (_e484.foreground_sample > 0f);
                                                    } else {
                                                        phi_1816_ = false;
                                                    }
                                                    let _e768 = phi_1816_;
                                                    if _e765 {
                                                        phi_1828_ = (_e484.foreground_sample > 0f);
                                                    } else {
                                                        phi_1828_ = false;
                                                    }
                                                    let _e774 = phi_1828_;
                                                    let _e779 = ((f32(select(0u, 1u, _e756)) + (f32(select(0u, 1u, !(_e756))) * -1f)) * ((f32(select(0u, 1u, _e768)) * -1f) + f32(select(0u, 1u, !(_e774)))));
                                                    let _e811 = f32(select(0u, 1u, ((_e685 & 16u) == 16u)));
                                                    let _e813 = (vec2<u32>(_e117, _e119) + _e86);
                                                    let _e816 = f32(_e813.x);
                                                    let _e817 = f32(_e813.y);
                                                    let _e818 = (_e672 - _e816);
                                                    let _e819 = (_e676 - _e817);
                                                    let _e820 = (_e817 < _e676);
                                                    let _e825 = -(_e818);
                                                    let _e832 = atan2(_e819, _e818);
                                                    let _e835 = ((f32(select(0u, 1u, _e820)) * (atan2(-(abs(_e819)), _e825) + 1.5707964f)) + (f32(select(0u, 1u, !(_e820))) * (_e832 + 1.5707964f)));
                                                    let _e836 = (_e816 < _e672);
                                                    let _e846 = ((f32(select(0u, 1u, _e836)) * _e832) + (f32(select(0u, 1u, !(_e836))) * atan2(-(_e819), _e825)));
                                                    let _e862 = settings.member.astigmatism_amount;
                                                    let _e869 = settings.member.astigmatism_gamma;
                                                    let _e870 = (1f / _e869);
                                                    let _e878 = global[0u];
                                                    if ((_e655 - _e681) == _e878) {
                                                        let _e881 = global[1u];
                                                        phi_1940_ = ((_e656 - _e682) == _e881);
                                                    } else {
                                                        phi_1940_ = false;
                                                    }
                                                    let _e884 = phi_1940_;
                                                    let _e887 = f32(select(0u, 1u, !(_e884)));
                                                    let _e896 = datamodel_NonUniformValue(vec2<f32>((_e811 * (_e887 * ((((((_e667 * cos(_e835)) + (_e668 * sin(_e835))) * _e484.foreground_sample) * _e862) * 0.4f) * pow(_e747, _e870)))), (_e811 * (_e887 * (((((((_e665 * -2f) * sin(_e846)) + (_e668 * cos(_e846))) * _e484.foreground_sample) * _e862) * 0.4f) * pow(_e739, _e870))))), datamodel_NonUniformValue(vec2<f32>(0f, 0f), 1f, 1f).opacity, datamodel_NonUniformValue(vec2<f32>(0f, 0f), 1f, 1f).scale);
                                                    let _e897 = (_e484.foreground_sample > 0f);
                                                    if _e897 {
                                                        phi_1973_ = ((_e685 & 2u) == 2u);
                                                    } else {
                                                        phi_1973_ = false;
                                                    }
                                                    let _e901 = phi_1973_;
                                                    if _e897 {
                                                        phi_1985_ = ((_e685 & 2u) == 2u);
                                                    } else {
                                                        phi_1985_ = false;
                                                    }
                                                    let _e908 = phi_1985_;
                                                    if _e897 {
                                                        phi_1999_ = ((_e685 & 4u) == 4u);
                                                    } else {
                                                        phi_1999_ = false;
                                                    }
                                                    let _e916 = phi_1999_;
                                                    if _e897 {
                                                        phi_2011_ = ((_e685 & 4u) == 4u);
                                                    } else {
                                                        phi_2011_ = false;
                                                    }
                                                    let _e923 = phi_2011_;
                                                    let _e928 = (((f32(select(0u, 1u, _e901)) * -1f) + f32(select(0u, 1u, !(_e908)))) * ((f32(select(0u, 1u, _e916)) * -1f) + f32(select(0u, 1u, !(_e923)))));
                                                    let _e930 = abs((_e484.foreground_sample * 0.2f));
                                                    let _e932 = select(_e930, 0f, (_e930 < 0f));
                                                    let _e934 = select(_e932, 1f, (_e932 > 1f));
                                                    let _e935 = (_e681 * _e934);
                                                    let _e936 = (_e682 * _e934);
                                                    let _e940 = settings.member.resolution[1u];
                                                    let _e942 = (f32(_e940) * _e645);
                                                    let _e944 = ((_e685 & 8u) == 8u);
                                                    if _e944 {
                                                        let _e948 = settings.member.resolution[0u];
                                                        phi_2059_ = (f32(_e948) > _e942);
                                                    } else {
                                                        phi_2059_ = false;
                                                    }
                                                    let _e952 = phi_2059_;
                                                    let _e958 = settings.member.resolution[0u];
                                                    let _e959 = f32(_e958);
                                                    if _e944 {
                                                        phi_2076_ = (_e959 > _e942);
                                                    } else {
                                                        phi_2076_ = false;
                                                    }
                                                    let _e964 = phi_2076_;
                                                    if _e944 {
                                                        phi_2090_ = (_e959 < _e942);
                                                    } else {
                                                        phi_2090_ = false;
                                                    }
                                                    let _e971 = phi_2090_;
                                                    if _e944 {
                                                        phi_2107_ = (_e959 < _e942);
                                                    } else {
                                                        phi_2107_ = false;
                                                    }
                                                    let _e978 = phi_2107_;
                                                    let _e985 = settings.member.catseye_gamma;
                                                    let _e1006 = settings.member.catseye_amount;
                                                    let _e1011 = (_e667 + (_e928 * (bitcast<f32>(((bitcast<u32>(pow(abs(_e935), (((f32(select(0u, 1u, _e952)) * (_e942 / _e959)) + f32(select(0u, 1u, !(_e964)))) / _e985))) & 2147483647u) | (bitcast<u32>(_e935) & 2147483648u))) * _e1006)));
                                                    let _e1012 = (_e668 + (_e928 * (bitcast<f32>(((bitcast<u32>(pow(abs(_e936), (((f32(select(0u, 1u, _e971)) * (_e959 / _e942)) + f32(select(0u, 1u, !(_e978)))) / _e985))) & 2147483647u) | (bitcast<u32>(_e936) & 2147483648u))) * _e1006)));
                                                    let _e1020 = settings.member.catseye_softness;
                                                    let _e1022 = ((1f - (((_e1011 * _e1011) + (_e1012 * _e1012)) * 0.25f)) / (_e1020 * 0.5f));
                                                    let _e1024 = select(_e1022, 0f, (_e1022 < 0f));
                                                    phi_2176_ = datamodel_NonUniformValue(_e896.offset, (((f32(select(0u, 1u, _e687)) * min(f32(select(0u, 1u, ((1f - (((_e779 * _e667) + (((_e698 * ((f32(select(0u, 1u, _e699)) * (_e704 * 0.02f)) + (f32(select(0u, 1u, !(_e699))) * (_e712 * 0.02f)))) - 0.5f) * bitcast<f32>((1065353216u | _e744)))) * bitcast<f32>(((bitcast<u32>(pow(_e739, _e738)) & 2147483647u) | _e744)))) > 0f))), f32(select(0u, 1u, ((1f - (((_e779 * _e668) + (((_e698 * ((f32(select(0u, 1u, _e717)) * (_e722 * 0.02f)) + (f32(select(0u, 1u, !(_e717))) * (_e730 * 0.02f)))) - 0.5f) * bitcast<f32>((1065353216u | _e752)))) * bitcast<f32>(((bitcast<u32>(pow(_e747, _e738)) & 2147483647u) | _e752)))) > 0f))))) + f32(select(0u, 1u, !(_e687)))) * select(_e1024, 1f, (_e1024 > 1f))), _e896.scale);
                                                } else {
                                                    phi_2176_ = datamodel_NonUniformValue();
                                                }
                                                let _e1033 = phi_2176_;
                                                phi_2178_ = _e1033;
                                                phi_2179_ = select(true, false, _e654);
                                            } else {
                                                phi_2178_ = datamodel_NonUniformValue();
                                                phi_2179_ = true;
                                            }
                                            let _e1036 = phi_2178_;
                                            let _e1038 = phi_2179_;
                                            if _e1038 {
                                                phi_2184_ = datamodel_NonUniformValue(vec2<f32>(0f, 0f), 1f, 1f);
                                            } else {
                                                phi_2184_ = _e1036;
                                            }
                                            let _e1040 = phi_2184_;
                                            let _e1043 = settings.member.render_scale;
                                            let _e1048 = smoothstep(0f, 1f, abs(((_e486 * f32(_e1043)) * 0.75f)));
                                            if ((_e159 & 32u) == 32u) {
                                                let _e1152 = settings.member.axial_aberration_amount;
                                                let _e1155 = settings.member.axial_aberration_type;
                                                switch _e1155 {
                                                    case 1: {
                                                        phi_2220_ = 1u;
                                                        break;
                                                    }
                                                    case 2: {
                                                        phi_2220_ = 2u;
                                                        break;
                                                    }
                                                    case 3: {
                                                        phi_2220_ = 3u;
                                                        break;
                                                    }
                                                    default: {
                                                        phi_2220_ = 1u;
                                                        break;
                                                    }
                                                }
                                                let _e1157 = phi_2220_;
                                                let _e1158 = (_e1152 * 0.25f);
                                                let _e1160 = (_e484.foreground_sample * _e1040.scale);
                                                let _e1161 = (_e1160 < 0f);
                                                if _e1161 {
                                                    phi_6636_ = _e1152;
                                                } else {
                                                    phi_6636_ = -(_e1152);
                                                }
                                                let _e1164 = phi_6636_;
                                                switch bitcast<i32>(_e1157) {
                                                    case 1: {
                                                        let _e1178 = (_e1164 > 0f);
                                                        if _e1178 {
                                                            phi_6781_ = abs(_e1158);
                                                        } else {
                                                            phi_6781_ = f32();
                                                        }
                                                        let _e1181 = phi_6781_;
                                                        phi_6647_ = select(_e1181, 0f, select(true, false, _e1178));
                                                        break;
                                                    }
                                                    case 2: {
                                                        let _e1172 = (_e1164 < 0f);
                                                        if _e1172 {
                                                            phi_6722_ = abs(_e1158);
                                                        } else {
                                                            phi_6722_ = f32();
                                                        }
                                                        let _e1175 = phi_6722_;
                                                        phi_6647_ = select(_e1175, 0f, select(true, false, _e1172));
                                                        break;
                                                    }
                                                    case 3: {
                                                        let _e1166 = (_e1164 > 0f);
                                                        if _e1166 {
                                                            phi_6662_ = abs(_e1158);
                                                        } else {
                                                            phi_6662_ = f32();
                                                        }
                                                        let _e1169 = phi_6662_;
                                                        phi_6647_ = select(_e1169, 0f, select(true, false, _e1166));
                                                        break;
                                                    }
                                                    default: {
                                                        phi_6647_ = f32();
                                                        break;
                                                    }
                                                }
                                                let _e1185 = phi_6647_;
                                                let _e1187 = (_e1160 * (1f - _e1185));
                                                if _e1161 {
                                                    phi_6829_ = _e1152;
                                                } else {
                                                    phi_6829_ = -(_e1152);
                                                }
                                                let _e1190 = phi_6829_;
                                                switch bitcast<i32>(_e1157) {
                                                    case 1: {
                                                        phi_6840_ = (abs(_e1158) * 0.5f);
                                                        break;
                                                    }
                                                    case 2: {
                                                        let _e1199 = (_e1190 < 0f);
                                                        if _e1199 {
                                                            phi_6932_ = abs(_e1158);
                                                        } else {
                                                            phi_6932_ = f32();
                                                        }
                                                        let _e1202 = phi_6932_;
                                                        phi_6840_ = select(_e1202, 0f, select(true, false, _e1199));
                                                        break;
                                                    }
                                                    case 3: {
                                                        let _e1192 = (_e1190 < 0f);
                                                        if _e1192 {
                                                            phi_6873_ = (abs(_e1158) * 0.5f);
                                                        } else {
                                                            phi_6873_ = f32();
                                                        }
                                                        let _e1196 = phi_6873_;
                                                        phi_6840_ = select(_e1196, 0f, select(true, false, _e1192));
                                                        break;
                                                    }
                                                    default: {
                                                        phi_6840_ = f32();
                                                        break;
                                                    }
                                                }
                                                let _e1208 = phi_6840_;
                                                let _e1210 = (_e1160 * (1f - _e1208));
                                                if _e1161 {
                                                    phi_7022_ = _e1152;
                                                } else {
                                                    phi_7022_ = -(_e1152);
                                                }
                                                let _e1213 = phi_7022_;
                                                switch bitcast<i32>(_e1157) {
                                                    case 1: {
                                                        let _e1227 = (_e1213 < 0f);
                                                        if _e1227 {
                                                            phi_7186_ = abs(_e1158);
                                                        } else {
                                                            phi_7186_ = f32();
                                                        }
                                                        let _e1230 = phi_7186_;
                                                        phi_7033_ = select(_e1230, 0f, select(true, false, _e1227));
                                                        break;
                                                    }
                                                    case 2: {
                                                        let _e1221 = (_e1213 > 0f);
                                                        if _e1221 {
                                                            phi_7142_ = abs(_e1158);
                                                        } else {
                                                            phi_7142_ = f32();
                                                        }
                                                        let _e1224 = phi_7142_;
                                                        phi_7033_ = select(_e1224, 0f, select(true, false, _e1221));
                                                        break;
                                                    }
                                                    case 3: {
                                                        let _e1215 = (_e1213 > 0f);
                                                        if _e1215 {
                                                            phi_7083_ = abs(_e1158);
                                                        } else {
                                                            phi_7083_ = f32();
                                                        }
                                                        let _e1218 = phi_7083_;
                                                        phi_7033_ = select(_e1218, 0f, select(true, false, _e1215));
                                                        break;
                                                    }
                                                    default: {
                                                        phi_7033_ = f32();
                                                        break;
                                                    }
                                                }
                                                let _e1234 = phi_7033_;
                                                let _e1236 = (_e1160 * (1f - _e1234));
                                                let _e1245 = max((abs(_e1187) * 2f), 1f);
                                                let _e1249 = settings.member.filter_resolution[0u];
                                                let _e1250 = f32(_e1249);
                                                let _e1254 = settings.member.filter_resolution[1u];
                                                let _e1255 = f32(_e1254);
                                                let _e1258 = -((_e1040.offset.x + _e338.x));
                                                let _e1259 = -((_e1040.offset.y + _e338.y));
                                                let _e1262 = (_e1250 * 0.5f);
                                                let _e1263 = (_e1255 * 0.5f);
                                                let _e1264 = ((_e1258 * (_e1250 / _e1245)) + _e1262);
                                                let _e1265 = ((_e1259 * (_e1255 / _e1245)) + _e1263);
                                                let _e1266 = (_e1187 > 0f);
                                                if _e1266 {
                                                    phi_2273_ = ((_e159 & 16u) == 16u);
                                                } else {
                                                    phi_2273_ = false;
                                                }
                                                let _e1270 = phi_2273_;
                                                let _e1272 = f32(select(0u, 1u, _e1270));
                                                if _e1266 {
                                                    phi_2288_ = ((_e159 & 16u) == 16u);
                                                } else {
                                                    phi_2288_ = false;
                                                }
                                                let _e1280 = phi_2288_;
                                                let _e1283 = f32(select(0u, 1u, !(_e1280)));
                                                let _e1288 = (_e1245 / _e1250);
                                                let _e1289 = (_e1245 / _e1255);
                                                let _e1295 = (((_e1272 * (_e1264 - 1f)) + (_e1283 * _e1264)) / _e1250);
                                                let _e1296 = (((_e1272 * (_e1265 - 1f)) + (_e1283 * _e1265)) / _e1255);
                                                if (_e1295 <= 0f) {
                                                    phi_2361_ = vec4<f32>();
                                                    phi_2362_ = true;
                                                    phi_2363_ = false;
                                                } else {
                                                    if (_e1296 <= 0f) {
                                                        phi_2358_ = vec4<f32>();
                                                        phi_2359_ = true;
                                                        phi_2360_ = false;
                                                    } else {
                                                        if (_e1295 > 1f) {
                                                            phi_2355_ = vec4<f32>();
                                                            phi_2356_ = true;
                                                            phi_2357_ = false;
                                                        } else {
                                                            let _e1300 = (_e1296 > 1f);
                                                            if _e1300 {
                                                                phi_2353_ = vec4<f32>();
                                                                phi_2354_ = false;
                                                            } else {
                                                                let _e1302 = ((_e159 & 2u) == 2u);
                                                                if _e1302 {
                                                                    phi_2352_ = vec4<f32>();
                                                                } else {
                                                                    let _e1304 = textureSampleLevel(filter_, bilinear_sampler, vec2<f32>(_e1295, _e1296), max(0f, log2((1f / select(_e1289, _e1288, (_e1288 > _e1289))))));
                                                                    phi_2352_ = _e1304;
                                                                }
                                                                let _e1306 = phi_2352_;
                                                                phi_2353_ = _e1306;
                                                                phi_2354_ = _e1302;
                                                            }
                                                            let _e1308 = phi_2353_;
                                                            let _e1310 = phi_2354_;
                                                            phi_2355_ = _e1308;
                                                            phi_2356_ = _e1300;
                                                            phi_2357_ = _e1310;
                                                        }
                                                        let _e1312 = phi_2355_;
                                                        let _e1314 = phi_2356_;
                                                        let _e1316 = phi_2357_;
                                                        phi_2358_ = _e1312;
                                                        phi_2359_ = _e1314;
                                                        phi_2360_ = _e1316;
                                                    }
                                                    let _e1318 = phi_2358_;
                                                    let _e1320 = phi_2359_;
                                                    let _e1322 = phi_2360_;
                                                    phi_2361_ = _e1318;
                                                    phi_2362_ = _e1320;
                                                    phi_2363_ = _e1322;
                                                }
                                                let _e1324 = phi_2361_;
                                                let _e1326 = phi_2362_;
                                                let _e1328 = phi_2363_;
                                                let _e1337 = max((abs(_e1210) * 2f), 1f);
                                                let _e1342 = ((_e1258 * (_e1250 / _e1337)) + _e1262);
                                                let _e1343 = ((_e1259 * (_e1255 / _e1337)) + _e1263);
                                                let _e1344 = (_e1210 > 0f);
                                                if _e1344 {
                                                    phi_2410_ = ((_e159 & 16u) == 16u);
                                                } else {
                                                    phi_2410_ = false;
                                                }
                                                let _e1348 = phi_2410_;
                                                let _e1350 = f32(select(0u, 1u, _e1348));
                                                if _e1344 {
                                                    phi_2425_ = ((_e159 & 16u) == 16u);
                                                } else {
                                                    phi_2425_ = false;
                                                }
                                                let _e1358 = phi_2425_;
                                                let _e1361 = f32(select(0u, 1u, !(_e1358)));
                                                let _e1366 = (_e1337 / _e1250);
                                                let _e1367 = (_e1337 / _e1255);
                                                let _e1373 = (((_e1350 * (_e1342 - 1f)) + (_e1361 * _e1342)) / _e1250);
                                                let _e1374 = (((_e1350 * (_e1343 - 1f)) + (_e1361 * _e1343)) / _e1255);
                                                if (_e1373 <= 0f) {
                                                    phi_2498_ = vec4<f32>();
                                                    phi_2499_ = true;
                                                    phi_2500_ = false;
                                                } else {
                                                    if (_e1374 <= 0f) {
                                                        phi_2495_ = vec4<f32>();
                                                        phi_2496_ = true;
                                                        phi_2497_ = false;
                                                    } else {
                                                        if (_e1373 > 1f) {
                                                            phi_2492_ = vec4<f32>();
                                                            phi_2493_ = true;
                                                            phi_2494_ = false;
                                                        } else {
                                                            let _e1378 = (_e1374 > 1f);
                                                            if _e1378 {
                                                                phi_2490_ = vec4<f32>();
                                                                phi_2491_ = false;
                                                            } else {
                                                                let _e1380 = ((_e159 & 2u) == 2u);
                                                                if _e1380 {
                                                                    phi_2489_ = vec4<f32>();
                                                                } else {
                                                                    let _e1382 = textureSampleLevel(filter_, bilinear_sampler, vec2<f32>(_e1373, _e1374), max(0f, log2((1f / select(_e1367, _e1366, (_e1366 > _e1367))))));
                                                                    phi_2489_ = _e1382;
                                                                }
                                                                let _e1384 = phi_2489_;
                                                                phi_2490_ = _e1384;
                                                                phi_2491_ = _e1380;
                                                            }
                                                            let _e1386 = phi_2490_;
                                                            let _e1388 = phi_2491_;
                                                            phi_2492_ = _e1386;
                                                            phi_2493_ = _e1378;
                                                            phi_2494_ = _e1388;
                                                        }
                                                        let _e1390 = phi_2492_;
                                                        let _e1392 = phi_2493_;
                                                        let _e1394 = phi_2494_;
                                                        phi_2495_ = _e1390;
                                                        phi_2496_ = _e1392;
                                                        phi_2497_ = _e1394;
                                                    }
                                                    let _e1396 = phi_2495_;
                                                    let _e1398 = phi_2496_;
                                                    let _e1400 = phi_2497_;
                                                    phi_2498_ = _e1396;
                                                    phi_2499_ = _e1398;
                                                    phi_2500_ = _e1400;
                                                }
                                                let _e1402 = phi_2498_;
                                                let _e1404 = phi_2499_;
                                                let _e1406 = phi_2500_;
                                                let _e1415 = max((abs(_e1236) * 2f), 1f);
                                                let _e1420 = ((_e1258 * (_e1250 / _e1415)) + _e1262);
                                                let _e1421 = ((_e1259 * (_e1255 / _e1415)) + _e1263);
                                                let _e1422 = (_e1236 > 0f);
                                                if _e1422 {
                                                    phi_2547_ = ((_e159 & 16u) == 16u);
                                                } else {
                                                    phi_2547_ = false;
                                                }
                                                let _e1426 = phi_2547_;
                                                let _e1428 = f32(select(0u, 1u, _e1426));
                                                if _e1422 {
                                                    phi_2562_ = ((_e159 & 16u) == 16u);
                                                } else {
                                                    phi_2562_ = false;
                                                }
                                                let _e1436 = phi_2562_;
                                                let _e1439 = f32(select(0u, 1u, !(_e1436)));
                                                let _e1444 = (_e1415 / _e1250);
                                                let _e1445 = (_e1415 / _e1255);
                                                let _e1451 = (((_e1428 * (_e1420 - 1f)) + (_e1439 * _e1420)) / _e1250);
                                                let _e1452 = (((_e1428 * (_e1421 - 1f)) + (_e1439 * _e1421)) / _e1255);
                                                if (_e1451 <= 0f) {
                                                    phi_2635_ = vec4<f32>();
                                                    phi_2636_ = true;
                                                    phi_2637_ = false;
                                                } else {
                                                    if (_e1452 <= 0f) {
                                                        phi_2632_ = vec4<f32>();
                                                        phi_2633_ = true;
                                                        phi_2634_ = false;
                                                    } else {
                                                        if (_e1451 > 1f) {
                                                            phi_2629_ = vec4<f32>();
                                                            phi_2630_ = true;
                                                            phi_2631_ = false;
                                                        } else {
                                                            let _e1456 = (_e1452 > 1f);
                                                            if _e1456 {
                                                                phi_2627_ = vec4<f32>();
                                                                phi_2628_ = false;
                                                            } else {
                                                                let _e1458 = ((_e159 & 2u) == 2u);
                                                                if _e1458 {
                                                                    phi_2626_ = vec4<f32>();
                                                                } else {
                                                                    let _e1460 = textureSampleLevel(filter_, bilinear_sampler, vec2<f32>(_e1451, _e1452), max(0f, log2((1f / select(_e1445, _e1444, (_e1444 > _e1445))))));
                                                                    phi_2626_ = _e1460;
                                                                }
                                                                let _e1462 = phi_2626_;
                                                                phi_2627_ = _e1462;
                                                                phi_2628_ = _e1458;
                                                            }
                                                            let _e1464 = phi_2627_;
                                                            let _e1466 = phi_2628_;
                                                            phi_2629_ = _e1464;
                                                            phi_2630_ = _e1456;
                                                            phi_2631_ = _e1466;
                                                        }
                                                        let _e1468 = phi_2629_;
                                                        let _e1470 = phi_2630_;
                                                        let _e1472 = phi_2631_;
                                                        phi_2632_ = _e1468;
                                                        phi_2633_ = _e1470;
                                                        phi_2634_ = _e1472;
                                                    }
                                                    let _e1474 = phi_2632_;
                                                    let _e1476 = phi_2633_;
                                                    let _e1478 = phi_2634_;
                                                    phi_2635_ = _e1474;
                                                    phi_2636_ = _e1476;
                                                    phi_2637_ = _e1478;
                                                }
                                                let _e1480 = phi_2635_;
                                                let _e1482 = phi_2636_;
                                                let _e1484 = phi_2637_;
                                                let _e1493 = max((abs(_e1160) * 2f), 1f);
                                                let _e1498 = ((_e1258 * (_e1250 / _e1493)) + _e1262);
                                                let _e1499 = ((_e1259 * (_e1255 / _e1493)) + _e1263);
                                                let _e1500 = (_e1160 > 0f);
                                                if _e1500 {
                                                    phi_2684_ = ((_e159 & 16u) == 16u);
                                                } else {
                                                    phi_2684_ = false;
                                                }
                                                let _e1504 = phi_2684_;
                                                let _e1506 = f32(select(0u, 1u, _e1504));
                                                if _e1500 {
                                                    phi_2699_ = ((_e159 & 16u) == 16u);
                                                } else {
                                                    phi_2699_ = false;
                                                }
                                                let _e1514 = phi_2699_;
                                                let _e1517 = f32(select(0u, 1u, !(_e1514)));
                                                let _e1522 = (_e1493 / _e1250);
                                                let _e1523 = (_e1493 / _e1255);
                                                let _e1529 = (((_e1506 * (_e1498 - 1f)) + (_e1517 * _e1498)) / _e1250);
                                                let _e1530 = (((_e1506 * (_e1499 - 1f)) + (_e1517 * _e1499)) / _e1255);
                                                if (_e1529 <= 0f) {
                                                    phi_2772_ = vec4<f32>();
                                                    phi_2773_ = true;
                                                    phi_2774_ = false;
                                                } else {
                                                    if (_e1530 <= 0f) {
                                                        phi_2769_ = vec4<f32>();
                                                        phi_2770_ = true;
                                                        phi_2771_ = false;
                                                    } else {
                                                        if (_e1529 > 1f) {
                                                            phi_2766_ = vec4<f32>();
                                                            phi_2767_ = true;
                                                            phi_2768_ = false;
                                                        } else {
                                                            let _e1534 = (_e1530 > 1f);
                                                            if _e1534 {
                                                                phi_2764_ = vec4<f32>();
                                                                phi_2765_ = false;
                                                            } else {
                                                                let _e1536 = ((_e159 & 2u) == 2u);
                                                                if _e1536 {
                                                                    phi_2763_ = vec4<f32>();
                                                                } else {
                                                                    let _e1538 = textureSampleLevel(filter_, bilinear_sampler, vec2<f32>(_e1529, _e1530), max(0f, log2((1f / select(_e1523, _e1522, (_e1522 > _e1523))))));
                                                                    phi_2763_ = _e1538;
                                                                }
                                                                let _e1540 = phi_2763_;
                                                                phi_2764_ = _e1540;
                                                                phi_2765_ = _e1536;
                                                            }
                                                            let _e1542 = phi_2764_;
                                                            let _e1544 = phi_2765_;
                                                            phi_2766_ = _e1542;
                                                            phi_2767_ = _e1534;
                                                            phi_2768_ = _e1544;
                                                        }
                                                        let _e1546 = phi_2766_;
                                                        let _e1548 = phi_2767_;
                                                        let _e1550 = phi_2768_;
                                                        phi_2769_ = _e1546;
                                                        phi_2770_ = _e1548;
                                                        phi_2771_ = _e1550;
                                                    }
                                                    let _e1552 = phi_2769_;
                                                    let _e1554 = phi_2770_;
                                                    let _e1556 = phi_2771_;
                                                    phi_2772_ = _e1552;
                                                    phi_2773_ = _e1554;
                                                    phi_2774_ = _e1556;
                                                }
                                                let _e1558 = phi_2772_;
                                                let _e1560 = phi_2773_;
                                                let _e1562 = phi_2774_;
                                                phi_2927_ = vec4<f32>(select(_e1324, select(vec4<f32>(1f, 1f, 1f, 1f), vec4<f32>(0f, 0f, 0f, 0f), vec4(_e1326)), vec4(select(_e1328, true, _e1326))).x, select(_e1402, select(vec4<f32>(1f, 1f, 1f, 1f), vec4<f32>(0f, 0f, 0f, 0f), vec4(_e1404)), vec4(select(_e1406, true, _e1404))).y, select(_e1480, select(vec4<f32>(1f, 1f, 1f, 1f), vec4<f32>(0f, 0f, 0f, 0f), vec4(_e1482)), vec4(select(_e1484, true, _e1482))).z, select(_e1558, select(vec4<f32>(1f, 1f, 1f, 1f), vec4<f32>(0f, 0f, 0f, 0f), vec4(_e1560)), vec4(select(_e1562, true, _e1560))).w);
                                            } else {
                                                let _e1052 = (_e484.foreground_sample * _e1040.scale);
                                                let _e1061 = max((abs(_e1052) * 2f), 1f);
                                                let _e1065 = settings.member.filter_resolution[0u];
                                                let _e1066 = f32(_e1065);
                                                let _e1070 = settings.member.filter_resolution[1u];
                                                let _e1071 = f32(_e1070);
                                                let _e1080 = ((-((_e1040.offset.x + _e338.x)) * (_e1066 / _e1061)) + (_e1066 * 0.5f));
                                                let _e1081 = ((-((_e1040.offset.y + _e338.y)) * (_e1071 / _e1061)) + (_e1071 * 0.5f));
                                                let _e1082 = (_e1052 > 0f);
                                                if _e1082 {
                                                    phi_2827_ = ((_e159 & 16u) == 16u);
                                                } else {
                                                    phi_2827_ = false;
                                                }
                                                let _e1086 = phi_2827_;
                                                let _e1088 = f32(select(0u, 1u, _e1086));
                                                if _e1082 {
                                                    phi_2842_ = ((_e159 & 16u) == 16u);
                                                } else {
                                                    phi_2842_ = false;
                                                }
                                                let _e1096 = phi_2842_;
                                                let _e1099 = f32(select(0u, 1u, !(_e1096)));
                                                let _e1104 = (_e1061 / _e1066);
                                                let _e1105 = (_e1061 / _e1071);
                                                let _e1111 = (((_e1088 * (_e1080 - 1f)) + (_e1099 * _e1080)) / _e1066);
                                                let _e1112 = (((_e1088 * (_e1081 - 1f)) + (_e1099 * _e1081)) / _e1071);
                                                if (_e1111 <= 0f) {
                                                    phi_2915_ = vec4<f32>();
                                                    phi_2916_ = true;
                                                    phi_2917_ = false;
                                                } else {
                                                    if (_e1112 <= 0f) {
                                                        phi_2912_ = vec4<f32>();
                                                        phi_2913_ = true;
                                                        phi_2914_ = false;
                                                    } else {
                                                        if (_e1111 > 1f) {
                                                            phi_2909_ = vec4<f32>();
                                                            phi_2910_ = true;
                                                            phi_2911_ = false;
                                                        } else {
                                                            let _e1116 = (_e1112 > 1f);
                                                            if _e1116 {
                                                                phi_2907_ = vec4<f32>();
                                                                phi_2908_ = false;
                                                            } else {
                                                                let _e1118 = ((_e159 & 2u) == 2u);
                                                                if _e1118 {
                                                                    phi_2906_ = vec4<f32>();
                                                                } else {
                                                                    let _e1120 = textureSampleLevel(filter_, bilinear_sampler, vec2<f32>(_e1111, _e1112), max(0f, log2((1f / select(_e1105, _e1104, (_e1104 > _e1105))))));
                                                                    phi_2906_ = _e1120;
                                                                }
                                                                let _e1122 = phi_2906_;
                                                                phi_2907_ = _e1122;
                                                                phi_2908_ = _e1118;
                                                            }
                                                            let _e1124 = phi_2907_;
                                                            let _e1126 = phi_2908_;
                                                            phi_2909_ = _e1124;
                                                            phi_2910_ = _e1116;
                                                            phi_2911_ = _e1126;
                                                        }
                                                        let _e1128 = phi_2909_;
                                                        let _e1130 = phi_2910_;
                                                        let _e1132 = phi_2911_;
                                                        phi_2912_ = _e1128;
                                                        phi_2913_ = _e1130;
                                                        phi_2914_ = _e1132;
                                                    }
                                                    let _e1134 = phi_2912_;
                                                    let _e1136 = phi_2913_;
                                                    let _e1138 = phi_2914_;
                                                    phi_2915_ = _e1134;
                                                    phi_2916_ = _e1136;
                                                    phi_2917_ = _e1138;
                                                }
                                                let _e1140 = phi_2915_;
                                                let _e1142 = phi_2916_;
                                                let _e1144 = phi_2917_;
                                                phi_2927_ = select(_e1140, select(vec4<f32>(1f, 1f, 1f, 1f), vec4<f32>(0f, 0f, 0f, 0f), vec4(_e1142)), vec4(select(_e1144, true, _e1142)));
                                            }
                                            let _e1571 = phi_2927_;
                                            let _e1578 = (_e1571.z * _e1040.opacity);
                                            let _e1582 = abs(_e486);
                                            let _e1583 = floor(_e1582);
                                            let _e1588 = select(select(u32(_e1583), 0u, (_e1583 < 0f)), 4294967295u, (_e1583 > 4294967000f));
                                            let _e1589 = ceil(_e1582);
                                            let _e1594 = select(select(u32(_e1589), 0u, (_e1589 < 0f)), 4294967295u, (_e1589 > 4294967000f));
                                            if (_e1588 < _e83) {
                                            } else {
                                                phi_8580_ = true;
                                                break;
                                            }
                                            let _e1598 = cached_sample_weights.member[_e1588];
                                            if (_e1594 < _e83) {
                                            } else {
                                                phi_8580_ = true;
                                                break;
                                            }
                                            let _e1602 = cached_sample_weights.member[_e1594];
                                            let _e1605 = (mix(_e1598, _e1602, (_e1582 - _e1583)) / _e275);
                                            let _e1613 = (((_e490 * _e623.w) * (_e1571.w * _e1040.opacity)) * _e1048);
                                            let _e1616 = select(false, true, (_e484.foreground_sample >= 0f));
                                            if _e1616 {
                                                phi_3011_ = (_e1048 * _e1578);
                                            } else {
                                                phi_3011_ = 0f;
                                            }
                                            let _e1620 = phi_3011_;
                                            let _e1621 = (vec4<f32>((((_e490 * _e623.x) * (_e1571.x * _e1040.opacity)) * _e1048), (((_e490 * _e623.y) * (_e1571.y * _e1040.opacity)) * _e1048), (((_e490 * _e623.z) * _e1578) * _e1048), _e1613) * _e1605);
                                            let _e1622 = ((_e1571 * _e1040.opacity) * _e1605);
                                            let _e1630 = (_e280.foreground.color.x + _e1621.x);
                                            let _e1649 = stages_ring_Rings(stages_ring_Ring(vec4<f32>(_e1630, _e280.foreground.color.y, _e280.foreground.color.z, _e280.foreground.color.w), _e280.foreground.kernel, _e280.foreground.count, _e280.foreground.found, _e280.foreground.weight, _e280.foreground.radius, _e280.foreground.alpha, _e280.foreground.alpha_masked, _e280.foreground.coc, _e280.foreground.deep), _e280.background);
                                            let _e1654 = (_e280.foreground.color.y + _e1621.y);
                                            let _e1673 = stages_ring_Rings(stages_ring_Ring(vec4<f32>(_e1649.foreground.color.x, _e1654, _e1649.foreground.color.z, _e1649.foreground.color.w), _e1649.foreground.kernel, _e1649.foreground.count, _e1649.foreground.found, _e1649.foreground.weight, _e1649.foreground.radius, _e1649.foreground.alpha, _e1649.foreground.alpha_masked, _e1649.foreground.coc, _e1649.foreground.deep), _e1649.background);
                                            let _e1678 = (_e280.foreground.color.z + _e1621.z);
                                            let _e1697 = stages_ring_Rings(stages_ring_Ring(vec4<f32>(_e1673.foreground.color.x, _e1673.foreground.color.y, _e1678, _e1673.foreground.color.w), _e1673.foreground.kernel, _e1673.foreground.count, _e1673.foreground.found, _e1673.foreground.weight, _e1673.foreground.radius, _e1673.foreground.alpha, _e1673.foreground.alpha_masked, _e1673.foreground.coc, _e1673.foreground.deep), _e1673.background);
                                            let _e1717 = stages_ring_Rings(stages_ring_Ring(vec4<f32>(_e1630, _e1654, _e1678, (_e280.foreground.color.w + _e1621.w)), _e1697.foreground.kernel, _e1697.foreground.count, _e1697.foreground.found, _e1697.foreground.weight, _e1697.foreground.radius, _e1697.foreground.alpha, _e1697.foreground.alpha_masked, _e1697.foreground.coc, _e1697.foreground.deep), _e1697.background);
                                            let _e1722 = (_e280.foreground.kernel.x + _e1622.x);
                                            let _e1741 = stages_ring_Rings(stages_ring_Ring(_e1717.foreground.color, vec4<f32>(_e1722, _e1717.foreground.kernel.y, _e1717.foreground.kernel.z, _e1717.foreground.kernel.w), _e1717.foreground.count, _e1717.foreground.found, _e1717.foreground.weight, _e1717.foreground.radius, _e1717.foreground.alpha, _e1717.foreground.alpha_masked, _e1717.foreground.coc, _e1717.foreground.deep), _e1717.background);
                                            let _e1746 = (_e280.foreground.kernel.y + _e1622.y);
                                            let _e1765 = stages_ring_Rings(stages_ring_Ring(_e1741.foreground.color, vec4<f32>(_e1741.foreground.kernel.x, _e1746, _e1741.foreground.kernel.z, _e1741.foreground.kernel.w), _e1741.foreground.count, _e1741.foreground.found, _e1741.foreground.weight, _e1741.foreground.radius, _e1741.foreground.alpha, _e1741.foreground.alpha_masked, _e1741.foreground.coc, _e1741.foreground.deep), _e1741.background);
                                            let _e1770 = (_e280.foreground.kernel.z + _e1622.z);
                                            let _e1789 = stages_ring_Rings(stages_ring_Ring(_e1765.foreground.color, vec4<f32>(_e1765.foreground.kernel.x, _e1765.foreground.kernel.y, _e1770, _e1765.foreground.kernel.w), _e1765.foreground.count, _e1765.foreground.found, _e1765.foreground.weight, _e1765.foreground.radius, _e1765.foreground.alpha, _e1765.foreground.alpha_masked, _e1765.foreground.coc, _e1765.foreground.deep), _e1765.background);
                                            let _e1809 = stages_ring_Rings(stages_ring_Ring(_e1789.foreground.color, vec4<f32>(_e1722, _e1746, _e1770, (_e280.foreground.kernel.w + _e1622.w)), _e1789.foreground.count, _e1789.foreground.found, _e1789.foreground.weight, _e1789.foreground.radius, _e1789.foreground.alpha, _e1789.foreground.alpha_masked, _e1789.foreground.coc, _e1789.foreground.deep), _e1789.background);
                                            let _e1826 = stages_ring_Rings(stages_ring_Ring(_e1809.foreground.color, _e1809.foreground.kernel, _e1809.foreground.count, _e1809.foreground.found, _e1809.foreground.weight, _e1809.foreground.radius, _e1809.foreground.alpha, (_e280.foreground.alpha_masked + (_e1620 * _e1605)), _e1809.foreground.coc, _e1809.foreground.deep), _e1809.background);
                                            let _e1843 = stages_ring_Rings(stages_ring_Ring(_e1826.foreground.color, _e1826.foreground.kernel, _e1826.foreground.count, _e1826.foreground.found, _e1826.foreground.weight, _e1826.foreground.radius, (_e280.foreground.alpha + (select(0f, _e1578, _e1616) * _e1605)), _e1826.foreground.alpha_masked, _e1826.foreground.coc, _e1826.foreground.deep), _e1826.background);
                                            let _e1860 = stages_ring_Rings(stages_ring_Ring(_e1843.foreground.color, _e1843.foreground.kernel, _e1843.foreground.count, _e1843.foreground.found, (_e280.foreground.weight + _e1605), _e1843.foreground.radius, _e1843.foreground.alpha, _e1843.foreground.alpha_masked, _e1843.foreground.coc, _e1843.foreground.deep), _e1843.background);
                                            let _e1877 = stages_ring_Rings(stages_ring_Ring(_e1860.foreground.color, _e1860.foreground.kernel, _e1860.foreground.count, (_e280.foreground.found + 1i), _e1860.foreground.weight, _e1860.foreground.radius, _e1860.foreground.alpha, _e1860.foreground.alpha_masked, _e1860.foreground.coc, _e1860.foreground.deep), _e1860.background);
                                            let _e1894 = stages_ring_Rings(stages_ring_Ring(_e1877.foreground.color, _e1877.foreground.kernel, _e1877.foreground.count, _e1877.foreground.found, _e1877.foreground.weight, _e1877.foreground.radius, _e1877.foreground.alpha, _e1877.foreground.alpha_masked, (_e280.foreground.coc + _e486), _e1877.foreground.deep), _e1877.background);
                                            phi_3072_ = stages_ring_Rings(stages_ring_Ring(_e1894.foreground.color, _e1894.foreground.kernel, _e1894.foreground.count, _e1894.foreground.found, _e1894.foreground.weight, _e1894.foreground.radius, _e1894.foreground.alpha, _e1894.foreground.alpha_masked, _e1894.foreground.coc, (_e280.foreground.deep + (_e1613 * _e1605))), _e1894.background);
                                        }
                                        let _e1913 = phi_3072_;
                                        let _e1918 = abs(_e484.background_sample);
                                        if (_e484.background_sample < 0f) {
                                            if (((_e338.x * _e338.x) + (_e338.y * _e338.y)) <= pow(ceil(_e1918), 2f)) {
                                                if _e161 {
                                                    let _e2185 = textureSampleLevel(input_image, bilinear_sampler, vec2<f32>(_e343, _e344), 0f);
                                                    phi_3743_ = _e2185;
                                                } else {
                                                    if _e484.uses_inpaint {
                                                        let _e2053 = floor(_e341);
                                                        let _e2054 = floor(_e342);
                                                        let _e2055 = (_e341 - _e2053);
                                                        let _e2057 = (_e2053 / _e113);
                                                        let _e2058 = (_e2054 / _e114);
                                                        let _e2060 = textureSampleLevel(inpaint_image, nearest_sampler, vec2<f32>(_e2057, _e2058), 0f);
                                                        let _e2062 = ((_e2053 + 1f) / _e113);
                                                        let _e2063 = vec2<f32>(_e2062, _e2058);
                                                        let _e2064 = textureSampleLevel(inpaint_image, nearest_sampler, _e2063, 0f);
                                                        let _e2065 = textureSampleLevel(depth, nearest_sampler, _e2063, 0f);
                                                        let _e2068 = abs((_e2065.x - _e484.background_sample));
                                                        let _e2072 = (f32(select(0u, 1u, (_e2068 > 0f))) * _e2068);
                                                        let _e2073 = (_e2072 < 1f);
                                                        let _e2082 = (_e2055 * (1f - ((f32(select(0u, 1u, _e2073)) * _e2072) + f32(select(0u, 1u, !(_e2073))))));
                                                        let _e2083 = (1f - _e2082);
                                                        let _e2105 = ((_e2054 + 1f) / _e114);
                                                        let _e2106 = vec2<f32>(_e2057, _e2105);
                                                        let _e2107 = textureSampleLevel(inpaint_image, nearest_sampler, _e2106, 0f);
                                                        let _e2108 = textureSampleLevel(depth, nearest_sampler, _e2106, 0f);
                                                        let _e2110 = vec2<f32>(_e2062, _e2105);
                                                        let _e2111 = textureSampleLevel(inpaint_image, nearest_sampler, _e2110, 0f);
                                                        let _e2112 = textureSampleLevel(depth, nearest_sampler, _e2110, 0f);
                                                        let _e2115 = abs((_e2108.x - _e2112.x));
                                                        let _e2119 = (f32(select(0u, 1u, (_e2115 > 0f))) * _e2115);
                                                        let _e2120 = (_e2119 < 1f);
                                                        let _e2129 = (_e2055 * (1f - ((f32(select(0u, 1u, _e2120)) * _e2119) + f32(select(0u, 1u, !(_e2120))))));
                                                        let _e2130 = (1f - _e2129);
                                                        let _e2154 = (1f - abs((mix(_e2108.x, _e2112.x, _e2129) - _e484.background_sample)));
                                                        let _e2158 = (f32(select(0u, 1u, (_e2154 > 0f))) * _e2154);
                                                        let _e2159 = (_e2158 < 1f);
                                                        let _e2167 = ((_e342 - _e2054) * ((f32(select(0u, 1u, _e2159)) * _e2158) + f32(select(0u, 1u, !(_e2159)))));
                                                        let _e2168 = (1f - _e2167);
                                                        phi_3742_ = vec4<f32>(((((_e2060.x * _e2083) + (_e2064.x * _e2082)) * _e2168) + (((_e2107.x * _e2130) + (_e2111.x * _e2129)) * _e2167)), ((((_e2060.y * _e2083) + (_e2064.y * _e2082)) * _e2168) + (((_e2107.y * _e2130) + (_e2111.y * _e2129)) * _e2167)), ((((_e2060.z * _e2083) + (_e2064.z * _e2082)) * _e2168) + (((_e2107.z * _e2130) + (_e2111.z * _e2129)) * _e2167)), ((((_e2060.w * _e2083) + (_e2064.w * _e2082)) * _e2168) + (((_e2107.w * _e2130) + (_e2111.w * _e2129)) * _e2167)));
                                                    } else {
                                                        let _e1924 = floor(_e341);
                                                        let _e1925 = floor(_e342);
                                                        let _e1926 = (_e341 - _e1924);
                                                        let _e1928 = (_e1924 / _e113);
                                                        let _e1929 = (_e1925 / _e114);
                                                        let _e1931 = textureSampleLevel(input_image, nearest_sampler, vec2<f32>(_e1928, _e1929), 0f);
                                                        let _e1933 = ((_e1924 + 1f) / _e113);
                                                        let _e1934 = vec2<f32>(_e1933, _e1929);
                                                        let _e1935 = textureSampleLevel(input_image, nearest_sampler, _e1934, 0f);
                                                        let _e1936 = textureSampleLevel(depth, nearest_sampler, _e1934, 0f);
                                                        let _e1939 = abs((_e1936.x - _e484.background_sample));
                                                        let _e1943 = (f32(select(0u, 1u, (_e1939 > 0f))) * _e1939);
                                                        let _e1944 = (_e1943 < 1f);
                                                        let _e1953 = (_e1926 * (1f - ((f32(select(0u, 1u, _e1944)) * _e1943) + f32(select(0u, 1u, !(_e1944))))));
                                                        let _e1954 = (1f - _e1953);
                                                        let _e1976 = ((_e1925 + 1f) / _e114);
                                                        let _e1977 = vec2<f32>(_e1928, _e1976);
                                                        let _e1978 = textureSampleLevel(input_image, nearest_sampler, _e1977, 0f);
                                                        let _e1979 = textureSampleLevel(depth, nearest_sampler, _e1977, 0f);
                                                        let _e1981 = vec2<f32>(_e1933, _e1976);
                                                        let _e1982 = textureSampleLevel(input_image, nearest_sampler, _e1981, 0f);
                                                        let _e1983 = textureSampleLevel(depth, nearest_sampler, _e1981, 0f);
                                                        let _e1986 = abs((_e1979.x - _e1983.x));
                                                        let _e1990 = (f32(select(0u, 1u, (_e1986 > 0f))) * _e1986);
                                                        let _e1991 = (_e1990 < 1f);
                                                        let _e2000 = (_e1926 * (1f - ((f32(select(0u, 1u, _e1991)) * _e1990) + f32(select(0u, 1u, !(_e1991))))));
                                                        let _e2001 = (1f - _e2000);
                                                        let _e2025 = (1f - abs((mix(_e1979.x, _e1983.x, _e2000) - _e484.background_sample)));
                                                        let _e2029 = (f32(select(0u, 1u, (_e2025 > 0f))) * _e2025);
                                                        let _e2030 = (_e2029 < 1f);
                                                        let _e2038 = ((_e342 - _e1925) * ((f32(select(0u, 1u, _e2030)) * _e2029) + f32(select(0u, 1u, !(_e2030)))));
                                                        let _e2039 = (1f - _e2038);
                                                        phi_3742_ = vec4<f32>(((((_e1931.x * _e1954) + (_e1935.x * _e1953)) * _e2039) + (((_e1978.x * _e2001) + (_e1982.x * _e2000)) * _e2038)), ((((_e1931.y * _e1954) + (_e1935.y * _e1953)) * _e2039) + (((_e1978.y * _e2001) + (_e1982.y * _e2000)) * _e2038)), ((((_e1931.z * _e1954) + (_e1935.z * _e1953)) * _e2039) + (((_e1978.z * _e2001) + (_e1982.z * _e2000)) * _e2038)), ((((_e1931.w * _e1954) + (_e1935.w * _e1953)) * _e2039) + (((_e1978.w * _e2001) + (_e1982.w * _e2000)) * _e2038)));
                                                    }
                                                    let _e2183 = phi_3742_;
                                                    phi_3743_ = _e2183;
                                                }
                                                let _e2187 = phi_3743_;
                                                let _e2199 = (_e338.x * ((f32(select(0u, 1u, _e310)) * _e309) + f32(select(0u, 1u, !(_e310)))));
                                                let _e2200 = (_e309 < 1f);
                                                let _e2205 = settings.member.pixel_aspect_normalizer;
                                                let _e2211 = (_e338.y * ((f32(select(0u, 1u, _e2200)) * _e2205) + f32(select(0u, 1u, !(_e2200)))));
                                                if ((_e159 & 8u) == 8u) {
                                                    let _e2214 = (_e484.background_sample != 0f);
                                                    if _e2214 {
                                                        let _e2215 = f32(_e118);
                                                        let _e2216 = f32(_e120);
                                                        let _e2224 = (1f - (2f * f32(select(0u, 1u, ((_e159 & 64u) == 64u)))));
                                                        let _e2225 = (_e2199 / _e484.background_sample);
                                                        let _e2227 = (_e2225 * 2f);
                                                        let _e2228 = ((_e2211 / _e484.background_sample) * 2f);
                                                        let _e2232 = settings.member.center[0u];
                                                        let _e2236 = settings.member.center[1u];
                                                        let _e2241 = ((((_e2215 + _e2199) - _e2232) / _e2232) * _e2224);
                                                        let _e2242 = ((((_e2216 + _e2211) - _e2236) / _e2236) * _e2224);
                                                        let _e2245 = settings.member.non_uniform_flags;
                                                        let _e2247 = ((_e2245 & 32u) == 32u);
                                                        let _e2252 = settings.member.barndoors_amount;
                                                        let _e2253 = (_e1918 * 0.2f);
                                                        let _e2255 = select(_e2253, 0f, (_e2253 < 0f));
                                                        let _e2258 = (_e2252 * select(_e2255, 1f, (_e2255 > 1f)));
                                                        let _e2259 = (_e2241 < 0f);
                                                        let _e2264 = settings.member.barndoors_right;
                                                        let _e2272 = settings.member.barndoors_left;
                                                        let _e2277 = (_e2242 < 0f);
                                                        let _e2282 = settings.member.barndoors_top;
                                                        let _e2290 = settings.member.barndoors_bottom;
                                                        let _e2297 = settings.member.barndoors_gamma;
                                                        let _e2298 = (1f / _e2297);
                                                        let _e2299 = abs(_e2241);
                                                        let _e2304 = (bitcast<u32>(_e2241) & 2147483648u);
                                                        let _e2307 = abs(_e2242);
                                                        let _e2312 = (bitcast<u32>(_e2242) & 2147483648u);
                                                        let _e2316 = ((_e2245 & 64u) == 64u);
                                                        let _e2325 = ((_e2245 & 128u) == 128u);
                                                        if _e2325 {
                                                            phi_3956_ = (_e484.background_sample > 0f);
                                                        } else {
                                                            phi_3956_ = false;
                                                        }
                                                        let _e2328 = phi_3956_;
                                                        if _e2325 {
                                                            phi_3968_ = (_e484.background_sample > 0f);
                                                        } else {
                                                            phi_3968_ = false;
                                                        }
                                                        let _e2334 = phi_3968_;
                                                        let _e2339 = ((f32(select(0u, 1u, _e2316)) + (f32(select(0u, 1u, !(_e2316))) * -1f)) * ((f32(select(0u, 1u, _e2328)) * -1f) + f32(select(0u, 1u, !(_e2334)))));
                                                        let _e2371 = f32(select(0u, 1u, ((_e2245 & 16u) == 16u)));
                                                        let _e2373 = (vec2<u32>(_e117, _e119) + _e86);
                                                        let _e2376 = f32(_e2373.x);
                                                        let _e2377 = f32(_e2373.y);
                                                        let _e2378 = (_e2232 - _e2376);
                                                        let _e2379 = (_e2236 - _e2377);
                                                        let _e2380 = (_e2377 < _e2236);
                                                        let _e2385 = -(_e2378);
                                                        let _e2392 = atan2(_e2379, _e2378);
                                                        let _e2395 = ((f32(select(0u, 1u, _e2380)) * (atan2(-(abs(_e2379)), _e2385) + 1.5707964f)) + (f32(select(0u, 1u, !(_e2380))) * (_e2392 + 1.5707964f)));
                                                        let _e2396 = (_e2376 < _e2232);
                                                        let _e2406 = ((f32(select(0u, 1u, _e2396)) * _e2392) + (f32(select(0u, 1u, !(_e2396))) * atan2(-(_e2379), _e2385)));
                                                        let _e2422 = settings.member.astigmatism_amount;
                                                        let _e2429 = settings.member.astigmatism_gamma;
                                                        let _e2430 = (1f / _e2429);
                                                        let _e2438 = global[0u];
                                                        if ((_e2215 - _e2241) == _e2438) {
                                                            let _e2441 = global[1u];
                                                            phi_4080_ = ((_e2216 - _e2242) == _e2441);
                                                        } else {
                                                            phi_4080_ = false;
                                                        }
                                                        let _e2444 = phi_4080_;
                                                        let _e2447 = f32(select(0u, 1u, !(_e2444)));
                                                        let _e2456 = datamodel_NonUniformValue(vec2<f32>((_e2371 * (_e2447 * ((((((_e2227 * cos(_e2395)) + (_e2228 * sin(_e2395))) * _e484.background_sample) * _e2422) * 0.4f) * pow(_e2307, _e2430)))), (_e2371 * (_e2447 * (((((((_e2225 * -2f) * sin(_e2406)) + (_e2228 * cos(_e2406))) * _e484.background_sample) * _e2422) * 0.4f) * pow(_e2299, _e2430))))), datamodel_NonUniformValue(vec2<f32>(0f, 0f), 1f, 1f).opacity, datamodel_NonUniformValue(vec2<f32>(0f, 0f), 1f, 1f).scale);
                                                        let _e2457 = (_e484.background_sample > 0f);
                                                        if _e2457 {
                                                            phi_4113_ = ((_e2245 & 2u) == 2u);
                                                        } else {
                                                            phi_4113_ = false;
                                                        }
                                                        let _e2461 = phi_4113_;
                                                        if _e2457 {
                                                            phi_4125_ = ((_e2245 & 2u) == 2u);
                                                        } else {
                                                            phi_4125_ = false;
                                                        }
                                                        let _e2468 = phi_4125_;
                                                        if _e2457 {
                                                            phi_4139_ = ((_e2245 & 4u) == 4u);
                                                        } else {
                                                            phi_4139_ = false;
                                                        }
                                                        let _e2476 = phi_4139_;
                                                        if _e2457 {
                                                            phi_4151_ = ((_e2245 & 4u) == 4u);
                                                        } else {
                                                            phi_4151_ = false;
                                                        }
                                                        let _e2483 = phi_4151_;
                                                        let _e2488 = (((f32(select(0u, 1u, _e2461)) * -1f) + f32(select(0u, 1u, !(_e2468)))) * ((f32(select(0u, 1u, _e2476)) * -1f) + f32(select(0u, 1u, !(_e2483)))));
                                                        let _e2490 = abs((_e484.background_sample * 0.2f));
                                                        let _e2492 = select(_e2490, 0f, (_e2490 < 0f));
                                                        let _e2494 = select(_e2492, 1f, (_e2492 > 1f));
                                                        let _e2495 = (_e2241 * _e2494);
                                                        let _e2496 = (_e2242 * _e2494);
                                                        let _e2500 = settings.member.resolution[1u];
                                                        let _e2502 = (f32(_e2500) * _e2205);
                                                        let _e2504 = ((_e2245 & 8u) == 8u);
                                                        if _e2504 {
                                                            let _e2508 = settings.member.resolution[0u];
                                                            phi_4199_ = (f32(_e2508) > _e2502);
                                                        } else {
                                                            phi_4199_ = false;
                                                        }
                                                        let _e2512 = phi_4199_;
                                                        let _e2518 = settings.member.resolution[0u];
                                                        let _e2519 = f32(_e2518);
                                                        if _e2504 {
                                                            phi_4216_ = (_e2519 > _e2502);
                                                        } else {
                                                            phi_4216_ = false;
                                                        }
                                                        let _e2524 = phi_4216_;
                                                        if _e2504 {
                                                            phi_4230_ = (_e2519 < _e2502);
                                                        } else {
                                                            phi_4230_ = false;
                                                        }
                                                        let _e2531 = phi_4230_;
                                                        if _e2504 {
                                                            phi_4247_ = (_e2519 < _e2502);
                                                        } else {
                                                            phi_4247_ = false;
                                                        }
                                                        let _e2538 = phi_4247_;
                                                        let _e2545 = settings.member.catseye_gamma;
                                                        let _e2566 = settings.member.catseye_amount;
                                                        let _e2571 = (_e2227 + (_e2488 * (bitcast<f32>(((bitcast<u32>(pow(abs(_e2495), (((f32(select(0u, 1u, _e2512)) * (_e2502 / _e2519)) + f32(select(0u, 1u, !(_e2524)))) / _e2545))) & 2147483647u) | (bitcast<u32>(_e2495) & 2147483648u))) * _e2566)));
                                                        let _e2572 = (_e2228 + (_e2488 * (bitcast<f32>(((bitcast<u32>(pow(abs(_e2496), (((f32(select(0u, 1u, _e2531)) * (_e2519 / _e2502)) + f32(select(0u, 1u, !(_e2538)))) / _e2545))) & 2147483647u) | (bitcast<u32>(_e2496) & 2147483648u))) * _e2566)));
                                                        let _e2580 = settings.member.catseye_softness;
                                                        let _e2582 = ((1f - (((_e2571 * _e2571) + (_e2572 * _e2572)) * 0.25f)) / (_e2580 * 0.5f));
                                                        let _e2584 = select(_e2582, 0f, (_e2582 < 0f));
                                                        phi_4316_ = datamodel_NonUniformValue(_e2456.offset, (((f32(select(0u, 1u, _e2247)) * min(f32(select(0u, 1u, ((1f - (((_e2339 * _e2227) + (((_e2258 * ((f32(select(0u, 1u, _e2259)) * (_e2264 * 0.02f)) + (f32(select(0u, 1u, !(_e2259))) * (_e2272 * 0.02f)))) - 0.5f) * bitcast<f32>((1065353216u | _e2304)))) * bitcast<f32>(((bitcast<u32>(pow(_e2299, _e2298)) & 2147483647u) | _e2304)))) > 0f))), f32(select(0u, 1u, ((1f - (((_e2339 * _e2228) + (((_e2258 * ((f32(select(0u, 1u, _e2277)) * (_e2282 * 0.02f)) + (f32(select(0u, 1u, !(_e2277))) * (_e2290 * 0.02f)))) - 0.5f) * bitcast<f32>((1065353216u | _e2312)))) * bitcast<f32>(((bitcast<u32>(pow(_e2307, _e2298)) & 2147483647u) | _e2312)))) > 0f))))) + f32(select(0u, 1u, !(_e2247)))) * select(_e2584, 1f, (_e2584 > 1f))), _e2456.scale);
                                                    } else {
                                                        phi_4316_ = datamodel_NonUniformValue();
                                                    }
                                                    let _e2593 = phi_4316_;
                                                    phi_4318_ = _e2593;
                                                    phi_4319_ = select(true, false, _e2214);
                                                } else {
                                                    phi_4318_ = datamodel_NonUniformValue();
                                                    phi_4319_ = true;
                                                }
                                                let _e2596 = phi_4318_;
                                                let _e2598 = phi_4319_;
                                                if _e2598 {
                                                    phi_4324_ = datamodel_NonUniformValue(vec2<f32>(0f, 0f), 1f, 1f);
                                                } else {
                                                    phi_4324_ = _e2596;
                                                }
                                                let _e2600 = phi_4324_;
                                                let _e2608 = settings.member.render_scale;
                                                let _e2615 = (f32(select(0u, 1u, _e484.uses_inpaint)) + (f32(select(0u, 1u, !(_e484.uses_inpaint))) * smoothstep(0f, 1f, abs(((_e1918 * f32(_e2608)) * 0.75f)))));
                                                if ((_e159 & 32u) == 32u) {
                                                    let _e2719 = settings.member.axial_aberration_amount;
                                                    let _e2722 = settings.member.axial_aberration_type;
                                                    switch _e2722 {
                                                        case 1: {
                                                            phi_4360_ = 1u;
                                                            break;
                                                        }
                                                        case 2: {
                                                            phi_4360_ = 2u;
                                                            break;
                                                        }
                                                        case 3: {
                                                            phi_4360_ = 3u;
                                                            break;
                                                        }
                                                        default: {
                                                            phi_4360_ = 1u;
                                                            break;
                                                        }
                                                    }
                                                    let _e2724 = phi_4360_;
                                                    let _e2725 = (_e2719 * 0.25f);
                                                    let _e2727 = (_e484.background_sample * _e2600.scale);
                                                    let _e2728 = (_e2727 < 0f);
                                                    if _e2728 {
                                                        phi_7690_ = _e2719;
                                                    } else {
                                                        phi_7690_ = -(_e2719);
                                                    }
                                                    let _e2731 = phi_7690_;
                                                    switch bitcast<i32>(_e2724) {
                                                        case 1: {
                                                            let _e2745 = (_e2731 > 0f);
                                                            if _e2745 {
                                                                phi_7835_ = abs(_e2725);
                                                            } else {
                                                                phi_7835_ = f32();
                                                            }
                                                            let _e2748 = phi_7835_;
                                                            phi_7701_ = select(_e2748, 0f, select(true, false, _e2745));
                                                            break;
                                                        }
                                                        case 2: {
                                                            let _e2739 = (_e2731 < 0f);
                                                            if _e2739 {
                                                                phi_7776_ = abs(_e2725);
                                                            } else {
                                                                phi_7776_ = f32();
                                                            }
                                                            let _e2742 = phi_7776_;
                                                            phi_7701_ = select(_e2742, 0f, select(true, false, _e2739));
                                                            break;
                                                        }
                                                        case 3: {
                                                            let _e2733 = (_e2731 > 0f);
                                                            if _e2733 {
                                                                phi_7716_ = abs(_e2725);
                                                            } else {
                                                                phi_7716_ = f32();
                                                            }
                                                            let _e2736 = phi_7716_;
                                                            phi_7701_ = select(_e2736, 0f, select(true, false, _e2733));
                                                            break;
                                                        }
                                                        default: {
                                                            phi_7701_ = f32();
                                                            break;
                                                        }
                                                    }
                                                    let _e2752 = phi_7701_;
                                                    let _e2754 = (_e2727 * (1f - _e2752));
                                                    if _e2728 {
                                                        phi_7883_ = _e2719;
                                                    } else {
                                                        phi_7883_ = -(_e2719);
                                                    }
                                                    let _e2757 = phi_7883_;
                                                    switch bitcast<i32>(_e2724) {
                                                        case 1: {
                                                            phi_7894_ = (abs(_e2725) * 0.5f);
                                                            break;
                                                        }
                                                        case 2: {
                                                            let _e2766 = (_e2757 < 0f);
                                                            if _e2766 {
                                                                phi_7986_ = abs(_e2725);
                                                            } else {
                                                                phi_7986_ = f32();
                                                            }
                                                            let _e2769 = phi_7986_;
                                                            phi_7894_ = select(_e2769, 0f, select(true, false, _e2766));
                                                            break;
                                                        }
                                                        case 3: {
                                                            let _e2759 = (_e2757 < 0f);
                                                            if _e2759 {
                                                                phi_7927_ = (abs(_e2725) * 0.5f);
                                                            } else {
                                                                phi_7927_ = f32();
                                                            }
                                                            let _e2763 = phi_7927_;
                                                            phi_7894_ = select(_e2763, 0f, select(true, false, _e2759));
                                                            break;
                                                        }
                                                        default: {
                                                            phi_7894_ = f32();
                                                            break;
                                                        }
                                                    }
                                                    let _e2775 = phi_7894_;
                                                    let _e2777 = (_e2727 * (1f - _e2775));
                                                    if _e2728 {
                                                        phi_8076_ = _e2719;
                                                    } else {
                                                        phi_8076_ = -(_e2719);
                                                    }
                                                    let _e2780 = phi_8076_;
                                                    switch bitcast<i32>(_e2724) {
                                                        case 1: {
                                                            let _e2794 = (_e2780 < 0f);
                                                            if _e2794 {
                                                                phi_8240_ = abs(_e2725);
                                                            } else {
                                                                phi_8240_ = f32();
                                                            }
                                                            let _e2797 = phi_8240_;
                                                            phi_8087_ = select(_e2797, 0f, select(true, false, _e2794));
                                                            break;
                                                        }
                                                        case 2: {
                                                            let _e2788 = (_e2780 > 0f);
                                                            if _e2788 {
                                                                phi_8196_ = abs(_e2725);
                                                            } else {
                                                                phi_8196_ = f32();
                                                            }
                                                            let _e2791 = phi_8196_;
                                                            phi_8087_ = select(_e2791, 0f, select(true, false, _e2788));
                                                            break;
                                                        }
                                                        case 3: {
                                                            let _e2782 = (_e2780 > 0f);
                                                            if _e2782 {
                                                                phi_8137_ = abs(_e2725);
                                                            } else {
                                                                phi_8137_ = f32();
                                                            }
                                                            let _e2785 = phi_8137_;
                                                            phi_8087_ = select(_e2785, 0f, select(true, false, _e2782));
                                                            break;
                                                        }
                                                        default: {
                                                            phi_8087_ = f32();
                                                            break;
                                                        }
                                                    }
                                                    let _e2801 = phi_8087_;
                                                    let _e2803 = (_e2727 * (1f - _e2801));
                                                    let _e2812 = max((abs(_e2754) * 2f), 1f);
                                                    let _e2816 = settings.member.filter_resolution[0u];
                                                    let _e2817 = f32(_e2816);
                                                    let _e2821 = settings.member.filter_resolution[1u];
                                                    let _e2822 = f32(_e2821);
                                                    let _e2825 = -((_e2600.offset.x + _e338.x));
                                                    let _e2826 = -((_e2600.offset.y + _e338.y));
                                                    let _e2829 = (_e2817 * 0.5f);
                                                    let _e2830 = (_e2822 * 0.5f);
                                                    let _e2831 = ((_e2825 * (_e2817 / _e2812)) + _e2829);
                                                    let _e2832 = ((_e2826 * (_e2822 / _e2812)) + _e2830);
                                                    let _e2833 = (_e2754 > 0f);
                                                    if _e2833 {
                                                        phi_4413_ = ((_e159 & 16u) == 16u);
                                                    } else {
                                                        phi_4413_ = false;
                                                    }
                                                    let _e2837 = phi_4413_;
                                                    let _e2839 = f32(select(0u, 1u, _e2837));
                                                    if _e2833 {
                                                        phi_4428_ = ((_e159 & 16u) == 16u);
                                                    } else {
                                                        phi_4428_ = false;
                                                    }
                                                    let _e2847 = phi_4428_;
                                                    let _e2850 = f32(select(0u, 1u, !(_e2847)));
                                                    let _e2855 = (_e2812 / _e2817);
                                                    let _e2856 = (_e2812 / _e2822);
                                                    let _e2862 = (((_e2839 * (_e2831 - 1f)) + (_e2850 * _e2831)) / _e2817);
                                                    let _e2863 = (((_e2839 * (_e2832 - 1f)) + (_e2850 * _e2832)) / _e2822);
                                                    if (_e2862 <= 0f) {
                                                        phi_4501_ = vec4<f32>();
                                                        phi_4502_ = true;
                                                        phi_4503_ = false;
                                                    } else {
                                                        if (_e2863 <= 0f) {
                                                            phi_4498_ = vec4<f32>();
                                                            phi_4499_ = true;
                                                            phi_4500_ = false;
                                                        } else {
                                                            if (_e2862 > 1f) {
                                                                phi_4495_ = vec4<f32>();
                                                                phi_4496_ = true;
                                                                phi_4497_ = false;
                                                            } else {
                                                                let _e2867 = (_e2863 > 1f);
                                                                if _e2867 {
                                                                    phi_4493_ = vec4<f32>();
                                                                    phi_4494_ = false;
                                                                } else {
                                                                    let _e2869 = ((_e159 & 2u) == 2u);
                                                                    if _e2869 {
                                                                        phi_4492_ = vec4<f32>();
                                                                    } else {
                                                                        let _e2871 = textureSampleLevel(filter_, bilinear_sampler, vec2<f32>(_e2862, _e2863), max(0f, log2((1f / select(_e2856, _e2855, (_e2855 > _e2856))))));
                                                                        phi_4492_ = _e2871;
                                                                    }
                                                                    let _e2873 = phi_4492_;
                                                                    phi_4493_ = _e2873;
                                                                    phi_4494_ = _e2869;
                                                                }
                                                                let _e2875 = phi_4493_;
                                                                let _e2877 = phi_4494_;
                                                                phi_4495_ = _e2875;
                                                                phi_4496_ = _e2867;
                                                                phi_4497_ = _e2877;
                                                            }
                                                            let _e2879 = phi_4495_;
                                                            let _e2881 = phi_4496_;
                                                            let _e2883 = phi_4497_;
                                                            phi_4498_ = _e2879;
                                                            phi_4499_ = _e2881;
                                                            phi_4500_ = _e2883;
                                                        }
                                                        let _e2885 = phi_4498_;
                                                        let _e2887 = phi_4499_;
                                                        let _e2889 = phi_4500_;
                                                        phi_4501_ = _e2885;
                                                        phi_4502_ = _e2887;
                                                        phi_4503_ = _e2889;
                                                    }
                                                    let _e2891 = phi_4501_;
                                                    let _e2893 = phi_4502_;
                                                    let _e2895 = phi_4503_;
                                                    let _e2904 = max((abs(_e2777) * 2f), 1f);
                                                    let _e2909 = ((_e2825 * (_e2817 / _e2904)) + _e2829);
                                                    let _e2910 = ((_e2826 * (_e2822 / _e2904)) + _e2830);
                                                    let _e2911 = (_e2777 > 0f);
                                                    if _e2911 {
                                                        phi_4550_ = ((_e159 & 16u) == 16u);
                                                    } else {
                                                        phi_4550_ = false;
                                                    }
                                                    let _e2915 = phi_4550_;
                                                    let _e2917 = f32(select(0u, 1u, _e2915));
                                                    if _e2911 {
                                                        phi_4565_ = ((_e159 & 16u) == 16u);
                                                    } else {
                                                        phi_4565_ = false;
                                                    }
                                                    let _e2925 = phi_4565_;
                                                    let _e2928 = f32(select(0u, 1u, !(_e2925)));
                                                    let _e2933 = (_e2904 / _e2817);
                                                    let _e2934 = (_e2904 / _e2822);
                                                    let _e2940 = (((_e2917 * (_e2909 - 1f)) + (_e2928 * _e2909)) / _e2817);
                                                    let _e2941 = (((_e2917 * (_e2910 - 1f)) + (_e2928 * _e2910)) / _e2822);
                                                    if (_e2940 <= 0f) {
                                                        phi_4638_ = vec4<f32>();
                                                        phi_4639_ = true;
                                                        phi_4640_ = false;
                                                    } else {
                                                        if (_e2941 <= 0f) {
                                                            phi_4635_ = vec4<f32>();
                                                            phi_4636_ = true;
                                                            phi_4637_ = false;
                                                        } else {
                                                            if (_e2940 > 1f) {
                                                                phi_4632_ = vec4<f32>();
                                                                phi_4633_ = true;
                                                                phi_4634_ = false;
                                                            } else {
                                                                let _e2945 = (_e2941 > 1f);
                                                                if _e2945 {
                                                                    phi_4630_ = vec4<f32>();
                                                                    phi_4631_ = false;
                                                                } else {
                                                                    let _e2947 = ((_e159 & 2u) == 2u);
                                                                    if _e2947 {
                                                                        phi_4629_ = vec4<f32>();
                                                                    } else {
                                                                        let _e2949 = textureSampleLevel(filter_, bilinear_sampler, vec2<f32>(_e2940, _e2941), max(0f, log2((1f / select(_e2934, _e2933, (_e2933 > _e2934))))));
                                                                        phi_4629_ = _e2949;
                                                                    }
                                                                    let _e2951 = phi_4629_;
                                                                    phi_4630_ = _e2951;
                                                                    phi_4631_ = _e2947;
                                                                }
                                                                let _e2953 = phi_4630_;
                                                                let _e2955 = phi_4631_;
                                                                phi_4632_ = _e2953;
                                                                phi_4633_ = _e2945;
                                                                phi_4634_ = _e2955;
                                                            }
                                                            let _e2957 = phi_4632_;
                                                            let _e2959 = phi_4633_;
                                                            let _e2961 = phi_4634_;
                                                            phi_4635_ = _e2957;
                                                            phi_4636_ = _e2959;
                                                            phi_4637_ = _e2961;
                                                        }
                                                        let _e2963 = phi_4635_;
                                                        let _e2965 = phi_4636_;
                                                        let _e2967 = phi_4637_;
                                                        phi_4638_ = _e2963;
                                                        phi_4639_ = _e2965;
                                                        phi_4640_ = _e2967;
                                                    }
                                                    let _e2969 = phi_4638_;
                                                    let _e2971 = phi_4639_;
                                                    let _e2973 = phi_4640_;
                                                    let _e2982 = max((abs(_e2803) * 2f), 1f);
                                                    let _e2987 = ((_e2825 * (_e2817 / _e2982)) + _e2829);
                                                    let _e2988 = ((_e2826 * (_e2822 / _e2982)) + _e2830);
                                                    let _e2989 = (_e2803 > 0f);
                                                    if _e2989 {
                                                        phi_4687_ = ((_e159 & 16u) == 16u);
                                                    } else {
                                                        phi_4687_ = false;
                                                    }
                                                    let _e2993 = phi_4687_;
                                                    let _e2995 = f32(select(0u, 1u, _e2993));
                                                    if _e2989 {
                                                        phi_4702_ = ((_e159 & 16u) == 16u);
                                                    } else {
                                                        phi_4702_ = false;
                                                    }
                                                    let _e3003 = phi_4702_;
                                                    let _e3006 = f32(select(0u, 1u, !(_e3003)));
                                                    let _e3011 = (_e2982 / _e2817);
                                                    let _e3012 = (_e2982 / _e2822);
                                                    let _e3018 = (((_e2995 * (_e2987 - 1f)) + (_e3006 * _e2987)) / _e2817);
                                                    let _e3019 = (((_e2995 * (_e2988 - 1f)) + (_e3006 * _e2988)) / _e2822);
                                                    if (_e3018 <= 0f) {
                                                        phi_4775_ = vec4<f32>();
                                                        phi_4776_ = true;
                                                        phi_4777_ = false;
                                                    } else {
                                                        if (_e3019 <= 0f) {
                                                            phi_4772_ = vec4<f32>();
                                                            phi_4773_ = true;
                                                            phi_4774_ = false;
                                                        } else {
                                                            if (_e3018 > 1f) {
                                                                phi_4769_ = vec4<f32>();
                                                                phi_4770_ = true;
                                                                phi_4771_ = false;
                                                            } else {
                                                                let _e3023 = (_e3019 > 1f);
                                                                if _e3023 {
                                                                    phi_4767_ = vec4<f32>();
                                                                    phi_4768_ = false;
                                                                } else {
                                                                    let _e3025 = ((_e159 & 2u) == 2u);
                                                                    if _e3025 {
                                                                        phi_4766_ = vec4<f32>();
                                                                    } else {
                                                                        let _e3027 = textureSampleLevel(filter_, bilinear_sampler, vec2<f32>(_e3018, _e3019), max(0f, log2((1f / select(_e3012, _e3011, (_e3011 > _e3012))))));
                                                                        phi_4766_ = _e3027;
                                                                    }
                                                                    let _e3029 = phi_4766_;
                                                                    phi_4767_ = _e3029;
                                                                    phi_4768_ = _e3025;
                                                                }
                                                                let _e3031 = phi_4767_;
                                                                let _e3033 = phi_4768_;
                                                                phi_4769_ = _e3031;
                                                                phi_4770_ = _e3023;
                                                                phi_4771_ = _e3033;
                                                            }
                                                            let _e3035 = phi_4769_;
                                                            let _e3037 = phi_4770_;
                                                            let _e3039 = phi_4771_;
                                                            phi_4772_ = _e3035;
                                                            phi_4773_ = _e3037;
                                                            phi_4774_ = _e3039;
                                                        }
                                                        let _e3041 = phi_4772_;
                                                        let _e3043 = phi_4773_;
                                                        let _e3045 = phi_4774_;
                                                        phi_4775_ = _e3041;
                                                        phi_4776_ = _e3043;
                                                        phi_4777_ = _e3045;
                                                    }
                                                    let _e3047 = phi_4775_;
                                                    let _e3049 = phi_4776_;
                                                    let _e3051 = phi_4777_;
                                                    let _e3060 = max((abs(_e2727) * 2f), 1f);
                                                    let _e3065 = ((_e2825 * (_e2817 / _e3060)) + _e2829);
                                                    let _e3066 = ((_e2826 * (_e2822 / _e3060)) + _e2830);
                                                    let _e3067 = (_e2727 > 0f);
                                                    if _e3067 {
                                                        phi_4824_ = ((_e159 & 16u) == 16u);
                                                    } else {
                                                        phi_4824_ = false;
                                                    }
                                                    let _e3071 = phi_4824_;
                                                    let _e3073 = f32(select(0u, 1u, _e3071));
                                                    if _e3067 {
                                                        phi_4839_ = ((_e159 & 16u) == 16u);
                                                    } else {
                                                        phi_4839_ = false;
                                                    }
                                                    let _e3081 = phi_4839_;
                                                    let _e3084 = f32(select(0u, 1u, !(_e3081)));
                                                    let _e3089 = (_e3060 / _e2817);
                                                    let _e3090 = (_e3060 / _e2822);
                                                    let _e3096 = (((_e3073 * (_e3065 - 1f)) + (_e3084 * _e3065)) / _e2817);
                                                    let _e3097 = (((_e3073 * (_e3066 - 1f)) + (_e3084 * _e3066)) / _e2822);
                                                    if (_e3096 <= 0f) {
                                                        phi_4912_ = vec4<f32>();
                                                        phi_4913_ = true;
                                                        phi_4914_ = false;
                                                    } else {
                                                        if (_e3097 <= 0f) {
                                                            phi_4909_ = vec4<f32>();
                                                            phi_4910_ = true;
                                                            phi_4911_ = false;
                                                        } else {
                                                            if (_e3096 > 1f) {
                                                                phi_4906_ = vec4<f32>();
                                                                phi_4907_ = true;
                                                                phi_4908_ = false;
                                                            } else {
                                                                let _e3101 = (_e3097 > 1f);
                                                                if _e3101 {
                                                                    phi_4904_ = vec4<f32>();
                                                                    phi_4905_ = false;
                                                                } else {
                                                                    let _e3103 = ((_e159 & 2u) == 2u);
                                                                    if _e3103 {
                                                                        phi_4903_ = vec4<f32>();
                                                                    } else {
                                                                        let _e3105 = textureSampleLevel(filter_, bilinear_sampler, vec2<f32>(_e3096, _e3097), max(0f, log2((1f / select(_e3090, _e3089, (_e3089 > _e3090))))));
                                                                        phi_4903_ = _e3105;
                                                                    }
                                                                    let _e3107 = phi_4903_;
                                                                    phi_4904_ = _e3107;
                                                                    phi_4905_ = _e3103;
                                                                }
                                                                let _e3109 = phi_4904_;
                                                                let _e3111 = phi_4905_;
                                                                phi_4906_ = _e3109;
                                                                phi_4907_ = _e3101;
                                                                phi_4908_ = _e3111;
                                                            }
                                                            let _e3113 = phi_4906_;
                                                            let _e3115 = phi_4907_;
                                                            let _e3117 = phi_4908_;
                                                            phi_4909_ = _e3113;
                                                            phi_4910_ = _e3115;
                                                            phi_4911_ = _e3117;
                                                        }
                                                        let _e3119 = phi_4909_;
                                                        let _e3121 = phi_4910_;
                                                        let _e3123 = phi_4911_;
                                                        phi_4912_ = _e3119;
                                                        phi_4913_ = _e3121;
                                                        phi_4914_ = _e3123;
                                                    }
                                                    let _e3125 = phi_4912_;
                                                    let _e3127 = phi_4913_;
                                                    let _e3129 = phi_4914_;
                                                    phi_5067_ = vec4<f32>(select(_e2891, select(vec4<f32>(1f, 1f, 1f, 1f), vec4<f32>(0f, 0f, 0f, 0f), vec4(_e2893)), vec4(select(_e2895, true, _e2893))).x, select(_e2969, select(vec4<f32>(1f, 1f, 1f, 1f), vec4<f32>(0f, 0f, 0f, 0f), vec4(_e2971)), vec4(select(_e2973, true, _e2971))).y, select(_e3047, select(vec4<f32>(1f, 1f, 1f, 1f), vec4<f32>(0f, 0f, 0f, 0f), vec4(_e3049)), vec4(select(_e3051, true, _e3049))).z, select(_e3125, select(vec4<f32>(1f, 1f, 1f, 1f), vec4<f32>(0f, 0f, 0f, 0f), vec4(_e3127)), vec4(select(_e3129, true, _e3127))).w);
                                                } else {
                                                    let _e2619 = (_e484.background_sample * _e2600.scale);
                                                    let _e2628 = max((abs(_e2619) * 2f), 1f);
                                                    let _e2632 = settings.member.filter_resolution[0u];
                                                    let _e2633 = f32(_e2632);
                                                    let _e2637 = settings.member.filter_resolution[1u];
                                                    let _e2638 = f32(_e2637);
                                                    let _e2647 = ((-((_e2600.offset.x + _e338.x)) * (_e2633 / _e2628)) + (_e2633 * 0.5f));
                                                    let _e2648 = ((-((_e2600.offset.y + _e338.y)) * (_e2638 / _e2628)) + (_e2638 * 0.5f));
                                                    let _e2649 = (_e2619 > 0f);
                                                    if _e2649 {
                                                        phi_4967_ = ((_e159 & 16u) == 16u);
                                                    } else {
                                                        phi_4967_ = false;
                                                    }
                                                    let _e2653 = phi_4967_;
                                                    let _e2655 = f32(select(0u, 1u, _e2653));
                                                    if _e2649 {
                                                        phi_4982_ = ((_e159 & 16u) == 16u);
                                                    } else {
                                                        phi_4982_ = false;
                                                    }
                                                    let _e2663 = phi_4982_;
                                                    let _e2666 = f32(select(0u, 1u, !(_e2663)));
                                                    let _e2671 = (_e2628 / _e2633);
                                                    let _e2672 = (_e2628 / _e2638);
                                                    let _e2678 = (((_e2655 * (_e2647 - 1f)) + (_e2666 * _e2647)) / _e2633);
                                                    let _e2679 = (((_e2655 * (_e2648 - 1f)) + (_e2666 * _e2648)) / _e2638);
                                                    if (_e2678 <= 0f) {
                                                        phi_5055_ = vec4<f32>();
                                                        phi_5056_ = true;
                                                        phi_5057_ = false;
                                                    } else {
                                                        if (_e2679 <= 0f) {
                                                            phi_5052_ = vec4<f32>();
                                                            phi_5053_ = true;
                                                            phi_5054_ = false;
                                                        } else {
                                                            if (_e2678 > 1f) {
                                                                phi_5049_ = vec4<f32>();
                                                                phi_5050_ = true;
                                                                phi_5051_ = false;
                                                            } else {
                                                                let _e2683 = (_e2679 > 1f);
                                                                if _e2683 {
                                                                    phi_5047_ = vec4<f32>();
                                                                    phi_5048_ = false;
                                                                } else {
                                                                    let _e2685 = ((_e159 & 2u) == 2u);
                                                                    if _e2685 {
                                                                        phi_5046_ = vec4<f32>();
                                                                    } else {
                                                                        let _e2687 = textureSampleLevel(filter_, bilinear_sampler, vec2<f32>(_e2678, _e2679), max(0f, log2((1f / select(_e2672, _e2671, (_e2671 > _e2672))))));
                                                                        phi_5046_ = _e2687;
                                                                    }
                                                                    let _e2689 = phi_5046_;
                                                                    phi_5047_ = _e2689;
                                                                    phi_5048_ = _e2685;
                                                                }
                                                                let _e2691 = phi_5047_;
                                                                let _e2693 = phi_5048_;
                                                                phi_5049_ = _e2691;
                                                                phi_5050_ = _e2683;
                                                                phi_5051_ = _e2693;
                                                            }
                                                            let _e2695 = phi_5049_;
                                                            let _e2697 = phi_5050_;
                                                            let _e2699 = phi_5051_;
                                                            phi_5052_ = _e2695;
                                                            phi_5053_ = _e2697;
                                                            phi_5054_ = _e2699;
                                                        }
                                                        let _e2701 = phi_5052_;
                                                        let _e2703 = phi_5053_;
                                                        let _e2705 = phi_5054_;
                                                        phi_5055_ = _e2701;
                                                        phi_5056_ = _e2703;
                                                        phi_5057_ = _e2705;
                                                    }
                                                    let _e2707 = phi_5055_;
                                                    let _e2709 = phi_5056_;
                                                    let _e2711 = phi_5057_;
                                                    phi_5067_ = select(_e2707, select(vec4<f32>(1f, 1f, 1f, 1f), vec4<f32>(0f, 0f, 0f, 0f), vec4(_e2709)), vec4(select(_e2711, true, _e2709)));
                                                }
                                                let _e3138 = phi_5067_;
                                                let _e3145 = (_e3138.z * _e2600.opacity);
                                                let _e3149 = abs(_e1918);
                                                let _e3150 = floor(_e3149);
                                                let _e3155 = select(select(u32(_e3150), 0u, (_e3150 < 0f)), 4294967295u, (_e3150 > 4294967000f));
                                                let _e3156 = ceil(_e3149);
                                                let _e3161 = select(select(u32(_e3156), 0u, (_e3156 < 0f)), 4294967295u, (_e3156 > 4294967000f));
                                                if (_e3155 < _e83) {
                                                } else {
                                                    phi_8580_ = true;
                                                    break;
                                                }
                                                let _e3165 = cached_sample_weights.member[_e3155];
                                                if (_e3161 < _e83) {
                                                } else {
                                                    phi_8580_ = true;
                                                    break;
                                                }
                                                let _e3169 = cached_sample_weights.member[_e3161];
                                                let _e3172 = (mix(_e3165, _e3169, (_e3149 - _e3150)) / _e275);
                                                let _e3180 = ((_e2187.w * (_e3138.w * _e2600.opacity)) * _e2615);
                                                let _e3183 = (vec4<f32>(((_e2187.x * (_e3138.x * _e2600.opacity)) * _e2615), ((_e2187.y * (_e3138.y * _e2600.opacity)) * _e2615), ((_e2187.z * _e3145) * _e2615), _e3180) * _e3172);
                                                let _e3184 = ((_e3138 * _e2600.opacity) * _e3172);
                                                let _e3192 = (_e1913.background.color.x + _e3183.x);
                                                let _e3211 = stages_ring_Rings(_e1913.foreground, stages_ring_Ring(vec4<f32>(_e3192, _e1913.background.color.y, _e1913.background.color.z, _e1913.background.color.w), _e1913.background.kernel, _e1913.background.count, _e1913.background.found, _e1913.background.weight, _e1913.background.radius, _e1913.background.alpha, _e1913.background.alpha_masked, _e1913.background.coc, _e1913.background.deep));
                                                let _e3216 = (_e1913.background.color.y + _e3183.y);
                                                let _e3235 = stages_ring_Rings(_e3211.foreground, stages_ring_Ring(vec4<f32>(_e3211.background.color.x, _e3216, _e3211.background.color.z, _e3211.background.color.w), _e3211.background.kernel, _e3211.background.count, _e3211.background.found, _e3211.background.weight, _e3211.background.radius, _e3211.background.alpha, _e3211.background.alpha_masked, _e3211.background.coc, _e3211.background.deep));
                                                let _e3240 = (_e1913.background.color.z + _e3183.z);
                                                let _e3259 = stages_ring_Rings(_e3235.foreground, stages_ring_Ring(vec4<f32>(_e3235.background.color.x, _e3235.background.color.y, _e3240, _e3235.background.color.w), _e3235.background.kernel, _e3235.background.count, _e3235.background.found, _e3235.background.weight, _e3235.background.radius, _e3235.background.alpha, _e3235.background.alpha_masked, _e3235.background.coc, _e3235.background.deep));
                                                let _e3279 = stages_ring_Rings(_e3259.foreground, stages_ring_Ring(vec4<f32>(_e3192, _e3216, _e3240, (_e1913.background.color.w + _e3183.w)), _e3259.background.kernel, _e3259.background.count, _e3259.background.found, _e3259.background.weight, _e3259.background.radius, _e3259.background.alpha, _e3259.background.alpha_masked, _e3259.background.coc, _e3259.background.deep));
                                                let _e3284 = (_e1913.background.kernel.x + _e3184.x);
                                                let _e3303 = stages_ring_Rings(_e3279.foreground, stages_ring_Ring(_e3279.background.color, vec4<f32>(_e3284, _e3279.background.kernel.y, _e3279.background.kernel.z, _e3279.background.kernel.w), _e3279.background.count, _e3279.background.found, _e3279.background.weight, _e3279.background.radius, _e3279.background.alpha, _e3279.background.alpha_masked, _e3279.background.coc, _e3279.background.deep));
                                                let _e3308 = (_e1913.background.kernel.y + _e3184.y);
                                                let _e3327 = stages_ring_Rings(_e3303.foreground, stages_ring_Ring(_e3303.background.color, vec4<f32>(_e3303.background.kernel.x, _e3308, _e3303.background.kernel.z, _e3303.background.kernel.w), _e3303.background.count, _e3303.background.found, _e3303.background.weight, _e3303.background.radius, _e3303.background.alpha, _e3303.background.alpha_masked, _e3303.background.coc, _e3303.background.deep));
                                                let _e3332 = (_e1913.background.kernel.z + _e3184.z);
                                                let _e3351 = stages_ring_Rings(_e3327.foreground, stages_ring_Ring(_e3327.background.color, vec4<f32>(_e3327.background.kernel.x, _e3327.background.kernel.y, _e3332, _e3327.background.kernel.w), _e3327.background.count, _e3327.background.found, _e3327.background.weight, _e3327.background.radius, _e3327.background.alpha, _e3327.background.alpha_masked, _e3327.background.coc, _e3327.background.deep));
                                                let _e3371 = stages_ring_Rings(_e3351.foreground, stages_ring_Ring(_e3351.background.color, vec4<f32>(_e3284, _e3308, _e3332, (_e1913.background.kernel.w + _e3184.w)), _e3351.background.count, _e3351.background.found, _e3351.background.weight, _e3351.background.radius, _e3351.background.alpha, _e3351.background.alpha_masked, _e3351.background.coc, _e3351.background.deep));
                                                let _e3388 = stages_ring_Rings(_e3371.foreground, stages_ring_Ring(_e3371.background.color, _e3371.background.kernel, _e3371.background.count, _e3371.background.found, _e3371.background.weight, _e3371.background.radius, _e3371.background.alpha, (_e1913.background.alpha_masked + ((_e2615 * _e3145) * _e3172)), _e3371.background.coc, _e3371.background.deep));
                                                let _e3405 = stages_ring_Rings(_e3388.foreground, stages_ring_Ring(_e3388.background.color, _e3388.background.kernel, _e3388.background.count, _e3388.background.found, _e3388.background.weight, _e3388.background.radius, (_e1913.background.alpha + (_e3145 * _e3172)), _e3388.background.alpha_masked, _e3388.background.coc, _e3388.background.deep));
                                                let _e3422 = stages_ring_Rings(_e3405.foreground, stages_ring_Ring(_e3405.background.color, _e3405.background.kernel, _e3405.background.count, _e3405.background.found, (_e1913.background.weight + _e3172), _e3405.background.radius, _e3405.background.alpha, _e3405.background.alpha_masked, _e3405.background.coc, _e3405.background.deep));
                                                let _e3439 = stages_ring_Rings(_e3422.foreground, stages_ring_Ring(_e3422.background.color, _e3422.background.kernel, _e3422.background.count, (_e1913.background.found + 1i), _e3422.background.weight, _e3422.background.radius, _e3422.background.alpha, _e3422.background.alpha_masked, _e3422.background.coc, _e3422.background.deep));
                                                let _e3456 = stages_ring_Rings(_e3439.foreground, stages_ring_Ring(_e3439.background.color, _e3439.background.kernel, _e3439.background.count, _e3439.background.found, _e3439.background.weight, _e3439.background.radius, _e3439.background.alpha, _e3439.background.alpha_masked, (_e1913.background.coc + _e1918), _e3439.background.deep));
                                                phi_5212_ = stages_ring_Rings(_e3456.foreground, stages_ring_Ring(_e3456.background.color, _e3456.background.kernel, _e3456.background.count, _e3456.background.found, _e3456.background.weight, _e3456.background.radius, _e3456.background.alpha, _e3456.background.alpha_masked, _e3456.background.coc, (_e1913.background.deep + (_e3180 * _e3172))));
                                            } else {
                                                phi_5212_ = _e1913;
                                            }
                                            let _e3475 = phi_5212_;
                                            phi_5213_ = _e3475;
                                        } else {
                                            phi_5213_ = _e1913;
                                        }
                                        let _e3477 = phi_5213_;
                                        phi_533_ = _e3477;
                                    } else {
                                        phi_533_ = stages_ring_Rings();
                                    }
                                    let _e3479 = phi_533_;
                                    continue;
                                    continuing {
                                        phi_529_ = _e293;
                                        phi_532_ = _e3479;
                                        phi_8580_ = _e195;
                                        break if !(_e299);
                                    }
                                }
                                let _e3482 = phi_8580_;
                                phi_12415_ = _e187;
                                phi_12408_ = _e189;
                                phi_12401_ = _e193;
                                phi_12394_ = _e191;
                                phi_12391_ = _e175;
                                phi_12389_ = _e179;
                                phi_12387_ = _e177;
                                phi_12380_ = _e3482;
                                if _e3482 {
                                    break;
                                }
                                let _e3484 = local;
                                if (_e3484.background.found == 0i) {
                                    let _e4100 = local_3;
                                    phi_5224_ = _e4100;
                                } else {
                                    let _e3490 = local_1;
                                    let _e3495 = local_2;
                                    phi_5224_ = stages_ring_Rings(_e3495.foreground, stages_ring_Ring(_e3495.background.color, _e3495.background.kernel, _e3495.background.count, _e3495.background.found, _e3495.background.weight, _e3495.background.radius, _e3495.background.alpha, _e3495.background.alpha_masked, (_e3490.background.coc / f32(_e3484.background.found)), _e3495.background.deep));
                                }
                                let _e3511 = phi_5224_;
                                let _e3526 = vec4<f32>((_e193.x + _e3511.foreground.color.x), (_e193.y + _e3511.foreground.color.y), (_e193.z + _e3511.foreground.color.z), (_e193.w + _e3511.foreground.color.w));
                                let _e3540 = vec4<f32>((_e191.x + _e3511.foreground.kernel.x), (_e191.y + _e3511.foreground.kernel.y), (_e191.z + _e3511.foreground.kernel.z), (_e191.w + _e3511.foreground.kernel.w));
                                let _e3542 = (_e189 + _e3511.foreground.alpha);
                                let _e3544 = (_e187 + _e3511.foreground.alpha_masked);
                                let _e3546 = abs(_e185);
                                let _e3547 = floor(_e3546);
                                let _e3552 = select(select(u32(_e3547), 0u, (_e3547 < 0f)), 4294967295u, (_e3547 > 4294967000f));
                                let _e3553 = ceil(_e3546);
                                let _e3558 = select(select(u32(_e3553), 0u, (_e3553 < 0f)), 4294967295u, (_e3553 > 4294967000f));
                                if (_e3552 < _e83) {
                                } else {
                                    phi_12415_ = _e3544;
                                    phi_12408_ = _e3542;
                                    phi_12401_ = _e3526;
                                    phi_12394_ = _e3540;
                                    phi_12391_ = _e175;
                                    phi_12389_ = _e179;
                                    phi_12387_ = _e177;
                                    phi_12380_ = true;
                                    break;
                                }
                                let _e3562 = cached_sample_weights.member[_e3552];
                                if (_e3558 < _e83) {
                                } else {
                                    phi_12415_ = _e3544;
                                    phi_12408_ = _e3542;
                                    phi_12401_ = _e3526;
                                    phi_12394_ = _e3540;
                                    phi_12391_ = _e175;
                                    phi_12389_ = _e179;
                                    phi_12387_ = _e177;
                                    phi_12380_ = true;
                                    break;
                                }
                                let _e3566 = cached_sample_weights.member[_e3558];
                                let _e3572 = abs(_e3511.background.coc);
                                let _e3573 = floor(_e3572);
                                let _e3578 = select(select(u32(_e3573), 0u, (_e3573 < 0f)), 4294967295u, (_e3573 > 4294967000f));
                                let _e3579 = ceil(_e3572);
                                let _e3584 = select(select(u32(_e3579), 0u, (_e3579 < 0f)), 4294967295u, (_e3579 > 4294967000f));
                                if (_e3578 < _e83) {
                                } else {
                                    phi_12415_ = _e3544;
                                    phi_12408_ = _e3542;
                                    phi_12401_ = _e3526;
                                    phi_12394_ = _e3540;
                                    phi_12391_ = _e175;
                                    phi_12389_ = _e179;
                                    phi_12387_ = _e177;
                                    phi_12380_ = true;
                                    break;
                                }
                                let _e3588 = cached_sample_weights.member[_e3578];
                                if (_e3584 < _e83) {
                                } else {
                                    phi_12415_ = _e3544;
                                    phi_12408_ = _e3542;
                                    phi_12401_ = _e3526;
                                    phi_12394_ = _e3540;
                                    phi_12391_ = _e175;
                                    phi_12389_ = _e179;
                                    phi_12387_ = _e177;
                                    phi_12380_ = true;
                                    break;
                                }
                                let _e3592 = cached_sample_weights.member[_e3584];
                                let _e3600 = (_e3511.background.radius * (mix(_e3588, _e3592, (_e3572 - _e3573)) * f32(_e3511.background.found)));
                                if (_e3600 == 0f) {
                                    phi_5348_ = 0f;
                                } else {
                                    let _e3603 = abs(_e3600);
                                    let _e3606 = (-((abs((_e181 * (mix(_e3562, _e3566, (_e3546 - _e3547)) * f32(_e183)))) - _e3603)) / _e3603);
                                    let _e3608 = select(_e3606, 0f, (_e3606 < 0f));
                                    phi_5348_ = select(_e3608, 1f, (_e3608 > 1f));
                                }
                                let _e3612 = phi_5348_;
                                let _e3614 = (1f - smoothstep(0f, 1f, _e3612));
                                phi_12430_ = _e3511.background.radius;
                                phi_12429_ = _e3511.background.found;
                                phi_12428_ = _e3511.background.coc;
                                phi_12417_ = _e3544;
                                phi_12410_ = _e3542;
                                phi_12403_ = _e3526;
                                phi_12396_ = _e3540;
                                phi_12392_ = (_e3511.background.alpha_masked + (_e175 * _e3614));
                                phi_12390_ = (_e3511.background.color + vec4<f32>((_e179.x * _e3614), (_e179.y * _e3614), (_e179.z * _e3614), (_e179.w * _e3614)));
                                phi_12388_ = (_e3511.background.kernel + vec4<f32>((_e177.x * _e3614), (_e177.y * _e3614), (_e177.z * _e3614), (_e177.w * _e3614)));
                                phi_12381_ = _e3482;
                            } else {
                                phi_12430_ = _e181;
                                phi_12429_ = _e183;
                                phi_12428_ = _e185;
                                phi_12417_ = _e187;
                                phi_12410_ = _e189;
                                phi_12403_ = _e193;
                                phi_12396_ = _e191;
                                phi_12392_ = _e175;
                                phi_12390_ = _e179;
                                phi_12388_ = _e177;
                                phi_12381_ = _e195;
                            }
                            let _e3641 = phi_12430_;
                            let _e3643 = phi_12429_;
                            let _e3645 = phi_12428_;
                            let _e3647 = phi_12417_;
                            let _e3649 = phi_12410_;
                            let _e3651 = phi_12403_;
                            let _e3653 = phi_12396_;
                            let _e3655 = phi_12392_;
                            let _e3657 = phi_12390_;
                            let _e3659 = phi_12388_;
                            let _e3661 = phi_12381_;
                            continue;
                            continuing {
                                phi_12054_ = _e3655;
                                phi_11706_ = _e3659;
                                phi_11358_ = _e3657;
                                phi_11010_ = _e3641;
                                phi_10666_ = _e3643;
                                phi_10322_ = _e3645;
                                phi_9978_ = _e3647;
                                phi_9634_ = _e3649;
                                phi_9290_ = _e3653;
                                phi_8946_ = _e3651;
                                phi_8592_ = _e3661;
                                phi_371_ = _e210;
                                phi_12415_ = _e3647;
                                phi_12408_ = _e3649;
                                phi_12401_ = _e3651;
                                phi_12394_ = _e3653;
                                phi_12391_ = _e3655;
                                phi_12389_ = _e3657;
                                phi_12387_ = _e3659;
                                phi_12380_ = _e3661;
                                break if !(_e216);
                            }
                        }
                        let _e3664 = phi_12415_;
                        let _e3666 = phi_12408_;
                        let _e3668 = phi_12401_;
                        let _e3670 = phi_12394_;
                        let _e3672 = phi_12391_;
                        let _e3674 = phi_12389_;
                        let _e3676 = phi_12387_;
                        let _e3678 = phi_12380_;
                        if _e3678 {
                            break;
                        }
                        if (_e3676.z != 0f) {
                            phi_12427_ = (_e3672 / _e3676.z);
                            phi_12422_ = vec4<f32>((_e3674.x / _e3676.x), (_e3674.y / _e3676.y), (_e3674.z / _e3676.z), (_e3674.w / _e3676.w));
                        } else {
                            phi_12427_ = _e3672;
                            phi_12422_ = _e3674;
                        }
                        let _e3695 = phi_12427_;
                        let _e3697 = phi_12422_;
                        if _e161 {
                            let _e3790 = settings.member.render_scale;
                            let _e3795 = smoothstep(0f, 1f, abs(((_e169 * f32(_e3790)) * 0.75f)));
                            let _e3797 = (_e3697.x * _e3795);
                            let _e3799 = (_e3697.y * _e3795);
                            let _e3801 = (_e3697.z * _e3795);
                            let _e3803 = (_e3697.w * _e3795);
                            if (_e81 == 5u) {
                                if (0u < _e81) {
                                } else {
                                    break;
                                }
                                output_image.member[0u] = _e3797;
                                if (1u < _e81) {
                                } else {
                                    break;
                                }
                                output_image.member[1u] = _e3799;
                                if (2u < _e81) {
                                } else {
                                    break;
                                }
                                output_image.member[2u] = _e3801;
                                if (3u < _e81) {
                                } else {
                                    break;
                                }
                                output_image.member[3u] = _e3803;
                                if (4u < _e81) {
                                } else {
                                    break;
                                }
                                output_image.member[4u] = _e3795;
                            } else {
                                if (_e79.x >= _e104) {
                                } else {
                                    let _e3808 = (_e79.x * 5u);
                                    if (((((_e79.y * _e104) * 5u) + _e3808) + 5u) > _e81) {
                                    } else {
                                        let _e3814 = ((_e79.y * (_e104 * 5u)) + _e3808);
                                        if (_e3814 < _e81) {
                                        } else {
                                            break;
                                        }
                                        output_image.member[_e3814] = _e3797;
                                        let _e3818 = (_e3814 + 1u);
                                        if (_e3818 < _e81) {
                                        } else {
                                            break;
                                        }
                                        output_image.member[_e3818] = _e3799;
                                        let _e3822 = (_e3814 + 2u);
                                        if (_e3822 < _e81) {
                                        } else {
                                            break;
                                        }
                                        output_image.member[_e3822] = _e3801;
                                        let _e3826 = (_e3814 + 3u);
                                        if (_e3826 < _e81) {
                                        } else {
                                            break;
                                        }
                                        output_image.member[_e3826] = _e3803;
                                        let _e3830 = (_e3814 + 4u);
                                        if (_e3830 < _e81) {
                                        } else {
                                            break;
                                        }
                                        output_image.member[_e3830] = _e3795;
                                    }
                                }
                            }
                        } else {
                            if (_e3670.z != 0f) {
                                phi_12425_ = (_e3664 / _e3670.z);
                                phi_12424_ = (_e3666 / _e3670.z);
                                phi_12423_ = vec4<f32>((_e3668.x / _e3670.x), (_e3668.y / _e3670.y), (_e3668.z / _e3670.z), (_e3668.w / _e3670.w));
                            } else {
                                phi_12425_ = _e3664;
                                phi_12424_ = _e3666;
                                phi_12423_ = _e3668;
                            }
                            let _e3715 = phi_12425_;
                            let _e3717 = phi_12424_;
                            let _e3719 = phi_12423_;
                            let _e3720 = (1f - _e3717);
                            let _e3730 = (_e3719.x + (_e3697.x * _e3720));
                            let _e3732 = (_e3719.y + (_e3697.y * _e3720));
                            let _e3734 = (_e3719.z + (_e3697.z * _e3720));
                            let _e3736 = (_e3719.w + (_e3697.w * _e3720));
                            let _e3738 = (_e3715 + (_e3695 * _e3720));
                            let _e3740 = select(_e3738, 0f, (_e3738 < 0f));
                            let _e3742 = select(_e3740, 1f, (_e3740 > 1f));
                            if (_e81 == 5u) {
                                if (0u < _e81) {
                                } else {
                                    break;
                                }
                                output_image.member[0u] = _e3730;
                                if (1u < _e81) {
                                } else {
                                    break;
                                }
                                output_image.member[1u] = _e3732;
                                if (2u < _e81) {
                                } else {
                                    break;
                                }
                                output_image.member[2u] = _e3734;
                                if (3u < _e81) {
                                } else {
                                    break;
                                }
                                output_image.member[3u] = _e3736;
                                if (4u < _e81) {
                                } else {
                                    break;
                                }
                                output_image.member[4u] = _e3742;
                            } else {
                                if (_e79.x >= _e104) {
                                } else {
                                    let _e3747 = (_e79.x * 5u);
                                    if (((((_e79.y * _e104) * 5u) + _e3747) + 5u) > _e81) {
                                    } else {
                                        let _e3753 = ((_e79.y * (_e104 * 5u)) + _e3747);
                                        if (_e3753 < _e81) {
                                        } else {
                                            break;
                                        }
                                        output_image.member[_e3753] = _e3730;
                                        let _e3757 = (_e3753 + 1u);
                                        if (_e3757 < _e81) {
                                        } else {
                                            break;
                                        }
                                        output_image.member[_e3757] = _e3732;
                                        let _e3761 = (_e3753 + 2u);
                                        if (_e3761 < _e81) {
                                        } else {
                                            break;
                                        }
                                        output_image.member[_e3761] = _e3734;
                                        let _e3765 = (_e3753 + 3u);
                                        if (_e3765 < _e81) {
                                        } else {
                                            break;
                                        }
                                        output_image.member[_e3765] = _e3736;
                                        let _e3769 = (_e3753 + 4u);
                                        if (_e3769 < _e81) {
                                        } else {
                                            break;
                                        }
                                        output_image.member[_e3769] = _e3742;
                                    }
                                }
                            }
                        }
                    }
                }
            }
            break;
        }
    }
    return;
}

@compute @workgroup_size(16, 16, 1) 
fn convolve_kernel_f32_(@builtin(global_invocation_id) gid: vec3<u32>) {
    gid_1 = gid;
    function();
}
